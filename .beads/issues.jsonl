{"id":"gno-0ux","title":"Fix EPIC 6 type errors in llm subsystem","description":"Typecheck fails on EPIC 6 llm code. Pre-existing issues:\n\n- cache.ts: string | undefined not assignable to string\n- cache.ts: Property 'type' doesn't exist on progress status\n- embedding.ts: createEmbeddingContext doesn't exist on Promise\u003cLlamaModel\u003e\n- embedding.ts: unknown[] not assignable to number[]\n- generation.ts: stopGenerationTrigger not in LLamaChatPromptOptions\n- rerank.ts: string | undefined not assignable to string\n- registry.ts: undefined not assignable to ModelPreset\n- Various test files need type guards\n\nThese block CI and need fixing before merge.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-25T00:08:36.215549+01:00","updated_at":"2025-12-25T00:16:54.584526+01:00","closed_at":"2025-12-25T00:16:54.584526+01:00","close_reason":"All type errors fixed and merged in PR #5","dependencies":[{"issue_id":"gno-0ux","depends_on_id":"gno-v8w","type":"parent-child","created_at":"2025-12-27T11:24:11.310725+01:00","created_by":"daemon"}]}
{"id":"gno-3qp","title":"EPIC 10: MCP server (stdio)","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-23T14:51:03.964582+01:00","updated_at":"2025-12-23T14:51:03.964582+01:00","dependencies":[{"issue_id":"gno-3qp","depends_on_id":"gno-h7i","type":"blocks","created_at":"2025-12-23T14:53:28.165572+01:00","created_by":"daemon"},{"issue_id":"gno-3qp","depends_on_id":"gno-n5m","type":"blocks","created_at":"2025-12-23T14:53:28.809445+01:00","created_by":"daemon"}],"comments":[{"id":1,"issue_id":"gno-3qp","author":"gordon","text":"Spec: spec/mcp.md defines all MCP tools, resources, schemas. Validate against spec/output-schemas/*.json","created_at":"2025-12-23T15:14:54Z"}]}
{"id":"gno-3qp.1","title":"T10.1: MCP server skeleton","description":"gno mcp starts stdio MCP server. Keep DB open for server lifetime. Reference: docs/prd.md §16.1.","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-23T14:51:51.968739+01:00","updated_at":"2025-12-23T14:51:51.968739+01:00","dependencies":[{"issue_id":"gno-3qp.1","depends_on_id":"gno-3qp","type":"parent-child","created_at":"2025-12-23T14:51:51.96968+01:00","created_by":"daemon"}]}
{"id":"gno-3qp.2","title":"T10.2: Implement MCP tools (gno.search/vsearch/query/get/multi_get/status)","description":"Tools return content[] (human-readable) + structuredContent (machine-readable matching schemas). isError on failures. Include source.absPath always. Reference: docs/prd.md §16.3.","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-23T14:51:53.20396+01:00","updated_at":"2025-12-23T14:51:53.20396+01:00","dependencies":[{"issue_id":"gno-3qp.2","depends_on_id":"gno-3qp","type":"parent-child","created_at":"2025-12-23T14:51:53.204874+01:00","created_by":"daemon"},{"issue_id":"gno-3qp.2","depends_on_id":"gno-3qp.1","type":"blocks","created_at":"2025-12-23T14:54:02.116998+01:00","created_by":"daemon"}]}
{"id":"gno-3qp.3","title":"T10.3: Implement resource reads for gno:// URIs","description":"Resources return text/markdown mirror content. Optional comment header with uri, source path, mime, docid, language. Line numbers default ON. URL-encode special chars but preserve slashes. Reference: docs/prd.md §16.2 and §16.4.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-23T14:51:54.786559+01:00","updated_at":"2025-12-23T14:51:54.786559+01:00","dependencies":[{"issue_id":"gno-3qp.3","depends_on_id":"gno-3qp","type":"parent-child","created_at":"2025-12-23T14:51:54.787386+01:00","created_by":"daemon"},{"issue_id":"gno-3qp.3","depends_on_id":"gno-3qp.2","type":"blocks","created_at":"2025-12-23T14:54:03.152773+01:00","created_by":"daemon"}]}
{"id":"gno-3qp.4","title":"T10.4: MCP contract tests (golden tool calls)","description":"Golden tests for MCP tool calls. Validate against spec/mcp.md and output schemas. Reference: docs/prd.md §22 EPIC 10.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-23T14:51:56.351605+01:00","updated_at":"2025-12-23T14:51:56.351605+01:00","dependencies":[{"issue_id":"gno-3qp.4","depends_on_id":"gno-3qp","type":"parent-child","created_at":"2025-12-23T14:51:56.35245+01:00","created_by":"daemon"},{"issue_id":"gno-3qp.4","depends_on_id":"gno-3qp.2","type":"blocks","created_at":"2025-12-23T14:54:04.002185+01:00","created_by":"daemon"}]}
{"id":"gno-40i","title":"search.ts N+1 + linear scan optimization (deferred from gno-o0u)","description":"## Plan: Linear Scan Optimization (O(n) → O(1))\n\n### Overview\nEliminate O(n) `.find()` scans in 4 pipeline files by pre-indexing chunks with Map after batch fetch. **Also migrate search.ts from per-hash getChunks() to getChunksBatch() for consistency.**\n\n### Approach\nAfter `getChunksBatch()` returns `Map\u003cstring, ChunkRow[]\u003e`, create a lookup factory that encapsulates the cache:\n\n```typescript\n// Factory pattern - cache belongs to chunksMap instance, not module\nexport function createChunkLookup(\n  chunksMap: Map\u003cstring, ChunkRow[]\u003e\n): (hash: string, seq: number) =\u003e ChunkRow | undefined {\n  const indexCache = new Map\u003cstring, Map\u003cnumber, ChunkRow\u003e\u003e();\n  \n  return (hash: string, seq: number): ChunkRow | undefined =\u003e {\n    let bySeq = indexCache.get(hash);\n    if (!bySeq) {\n      const chunks = chunksMap.get(hash) ?? [];\n      bySeq = new Map\u003cnumber, ChunkRow\u003e();\n      // First-wins semantics (preserve .find() behavior)\n      for (const ch of chunks) {\n        if (!bySeq.has(ch.seq)) bySeq.set(ch.seq, ch);\n      }\n      indexCache.set(hash, bySeq);\n    }\n    return bySeq.get(seq);\n  };\n}\n\n// Usage in pipeline:\nconst chunksMap = await store.getChunksBatch(hashes);\nconst getChunk = createChunkLookup(chunksMap.value);\nconst chunk = getChunk(candidate.mirrorHash, candidate.seq);\n```\n\n### Key Design Decisions\n1. **Index once per hash** - via lazy cache, not per-lookup Map construction\n2. **First-wins semantics** - preserve `.find()` behavior for degenerate duplicate seq cases\n3. **Shared helper** - single factory in `src/pipeline/chunk-lookup.ts` to prevent divergence\n4. **Per-search cache** - factory pattern ensures cache is scoped to chunksMap instance, preventing cross-query leakage\n\n### Scope\n1. **Create helper**: `src/pipeline/chunk-lookup.ts` with `createChunkLookup(chunksMap)`\n2. **Replace .find() in 4 files**:\n   - hybrid.ts:415\n   - vsearch.ts:115\n   - rerank.ts:144\n   - search.ts:180\n3. **Migrate search.ts to getChunksBatch()** (lines 167-182) - required, not optional\n\n### Risks\n- Memory: ~40 bytes per chunk pointer (negligible for typical result sizes)\n- Map build is O(n) per hash; benefit comes from reuse across many lookups per search\n\n### Acceptance\n- [ ] `src/pipeline/chunk-lookup.ts` created with factory pattern\n- [ ] All `.find((c) =\u003e c.seq ===` replaced with getChunk()\n- [ ] search.ts migrated from getChunks() to getChunksBatch()\n- [ ] Tests pass (`bun test`)\n- [ ] Lint passes (`bun run lint`)\n- [ ] No functional changes (same results, first-wins preserved)\n\n### References\n- PR #12: perf(pipeline): N+1 chunk query optimization\n- plans/vsearch-n1-query-optimization.md\n- Types: src/store/types.ts:123-133 (ChunkRow)","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-27T23:38:25.067036+01:00","updated_at":"2025-12-28T01:01:23.400036+01:00","closed_at":"2025-12-28T01:01:23.400036+01:00","close_reason":"Implemented O(1) chunk lookup, migrated search.ts to getChunksBatch(), added unit tests and N+1 guard"}
{"id":"gno-40i.1","title":"hybrid.ts: replace .find() with Map lookup at line 415","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-28T00:12:11.045693+01:00","updated_at":"2025-12-28T01:01:17.079785+01:00","closed_at":"2025-12-28T01:01:17.079785+01:00","close_reason":"Implemented and tested","dependencies":[{"issue_id":"gno-40i.1","depends_on_id":"gno-40i","type":"parent-child","created_at":"2025-12-28T00:12:11.059031+01:00","created_by":"daemon"},{"issue_id":"gno-40i.1","depends_on_id":"gno-40i.6","type":"blocks","created_at":"2025-12-28T00:17:53.607586+01:00","created_by":"daemon"}]}
{"id":"gno-40i.2","title":"vsearch.ts: replace .find() with Map lookup at line 115","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-28T00:12:12.512175+01:00","updated_at":"2025-12-28T01:01:17.085729+01:00","closed_at":"2025-12-28T01:01:17.085729+01:00","close_reason":"Implemented and tested","dependencies":[{"issue_id":"gno-40i.2","depends_on_id":"gno-40i","type":"parent-child","created_at":"2025-12-28T00:12:12.517541+01:00","created_by":"daemon"},{"issue_id":"gno-40i.2","depends_on_id":"gno-40i.6","type":"blocks","created_at":"2025-12-28T00:17:53.767449+01:00","created_by":"daemon"}]}
{"id":"gno-40i.3","title":"rerank.ts: replace .find() with Map lookup at line 144","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-28T00:12:13.695684+01:00","updated_at":"2025-12-28T01:01:17.089759+01:00","closed_at":"2025-12-28T01:01:17.089759+01:00","close_reason":"Implemented and tested","dependencies":[{"issue_id":"gno-40i.3","depends_on_id":"gno-40i","type":"parent-child","created_at":"2025-12-28T00:12:13.704096+01:00","created_by":"daemon"},{"issue_id":"gno-40i.3","depends_on_id":"gno-40i.6","type":"blocks","created_at":"2025-12-28T00:17:53.941287+01:00","created_by":"daemon"}]}
{"id":"gno-40i.4","title":"search.ts: replace .find() with Map lookup at line 180","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-28T00:12:14.855728+01:00","updated_at":"2025-12-28T01:01:17.094408+01:00","closed_at":"2025-12-28T01:01:17.094408+01:00","close_reason":"Implemented and tested","dependencies":[{"issue_id":"gno-40i.4","depends_on_id":"gno-40i","type":"parent-child","created_at":"2025-12-28T00:12:14.862209+01:00","created_by":"daemon"},{"issue_id":"gno-40i.4","depends_on_id":"gno-40i.6","type":"blocks","created_at":"2025-12-28T00:17:54.094797+01:00","created_by":"daemon"},{"issue_id":"gno-40i.4","depends_on_id":"gno-40i.7","type":"blocks","created_at":"2025-12-28T00:17:54.403318+01:00","created_by":"daemon"}]}
{"id":"gno-40i.5","title":"Run tests and lint to verify no regressions","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-28T00:12:16.449159+01:00","updated_at":"2025-12-28T01:01:17.095808+01:00","closed_at":"2025-12-28T01:01:17.095808+01:00","close_reason":"Implemented and tested","dependencies":[{"issue_id":"gno-40i.5","depends_on_id":"gno-40i","type":"parent-child","created_at":"2025-12-28T00:12:16.453094+01:00","created_by":"daemon"},{"issue_id":"gno-40i.5","depends_on_id":"gno-40i.1","type":"blocks","created_at":"2025-12-28T00:12:22.93113+01:00","created_by":"daemon"},{"issue_id":"gno-40i.5","depends_on_id":"gno-40i.2","type":"blocks","created_at":"2025-12-28T00:12:23.079094+01:00","created_by":"daemon"},{"issue_id":"gno-40i.5","depends_on_id":"gno-40i.3","type":"blocks","created_at":"2025-12-28T00:12:23.217651+01:00","created_by":"daemon"},{"issue_id":"gno-40i.5","depends_on_id":"gno-40i.4","type":"blocks","created_at":"2025-12-28T00:12:23.35328+01:00","created_by":"daemon"}]}
{"id":"gno-40i.6","title":"Create src/pipeline/chunk-lookup.ts with lazy-cached getChunk()","description":"Create shared helper with factory pattern. Cache scoped to chunksMap instance (not module-level) to prevent cross-query leakage. First-wins semantics for duplicate seq handling.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-28T00:17:45.231524+01:00","updated_at":"2025-12-28T01:01:17.097111+01:00","closed_at":"2025-12-28T01:01:17.097111+01:00","close_reason":"Implemented and tested","dependencies":[{"issue_id":"gno-40i.6","depends_on_id":"gno-40i","type":"parent-child","created_at":"2025-12-28T00:17:45.240288+01:00","created_by":"daemon"}]}
{"id":"gno-40i.7","title":"Migrate search.ts from getChunks() to getChunksBatch()","description":"Replace per-hash N+1 queries with batch fetch (required, not optional)","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-28T00:17:46.457744+01:00","updated_at":"2025-12-28T01:01:17.098411+01:00","closed_at":"2025-12-28T01:01:17.098411+01:00","close_reason":"Implemented and tested","dependencies":[{"issue_id":"gno-40i.7","depends_on_id":"gno-40i","type":"parent-child","created_at":"2025-12-28T00:17:46.461693+01:00","created_by":"daemon"}]}
{"id":"gno-74v","title":"Gated model docs: HF_TOKEN required for BAAI/bge-m3","description":"BAAI/bge-m3 (default embed model) was using non-existent HuggingFace repo.\n\nRoot cause:\n- BAAI doesn't publish GGUF versions directly\n- Original preset used fake repo 'BAAI/bge-m3-gguf' which doesn't exist\n\nFix applied:\n- Changed default preset to use gpustack/bge-m3-GGUF (community GGUF conversion)\n- Changed reranker to gpustack/bge-reranker-v2-m3-GGUF\n- Both repos are actively maintained with proper Q4_K_M quantizations\n\nHF_TOKEN note:\n- Created .env.template for users who need gated model access\n- gpustack models are public/ungated, so HF_TOKEN not required for defaults\n\nFuture work:\n- Model configurability via env vars (GNO_EMBED_MODEL, etc)\n- Allow overriding preset models in config file","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-24T23:58:05.460835+01:00","updated_at":"2025-12-25T00:03:53.662351+01:00","dependencies":[{"issue_id":"gno-74v","depends_on_id":"gno-v8w","type":"parent-child","created_at":"2025-12-27T11:23:33.080553+01:00","created_by":"daemon"}]}
{"id":"gno-8db","title":"EPIC 0: Repo scaffold and naming constants","status":"closed","priority":0,"issue_type":"epic","created_at":"2025-12-23T14:50:51.649521+01:00","updated_at":"2025-12-23T15:22:24.552281+01:00","closed_at":"2025-12-23T15:22:24.552281+01:00","close_reason":"All tasks complete: scaffold, constants module, CI"}
{"id":"gno-8db.1","title":"T0.1: Bun+TS ESM scaffold with lint/typecheck/test baseline","description":"Set up Bun + TypeScript ESM project. Configure biome for linting/formatting, tsgo for typecheck, bun test for testing. Verify with `bun test` passing. Reference: docs/prd.md §22 EPIC 0.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-23T14:50:59.683948+01:00","updated_at":"2025-12-23T15:21:57.179716+01:00","closed_at":"2025-12-23T15:21:57.179716+01:00","close_reason":"Implemented: folder structure per PRD, constants module with OS paths/env overrides, 33 passing tests","dependencies":[{"issue_id":"gno-8db.1","depends_on_id":"gno-8db","type":"parent-child","created_at":"2025-12-23T14:50:59.684818+01:00","created_by":"daemon"}]}
{"id":"gno-8db.2","title":"T0.2: Central constants module for naming (CLI, URI, dirs, MCP)","description":"Create src/app/constants.ts with all configurable names: CLI name (\"gno\"), URI scheme (\"gno://\"), config/data/cache dir names, MCP server name, MCP tool namespace prefix. Must be single-module rename. Reference: docs/prd.md §2.2.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-23T14:51:06.354042+01:00","updated_at":"2025-12-23T15:21:57.185416+01:00","closed_at":"2025-12-23T15:21:57.185416+01:00","close_reason":"Implemented: folder structure per PRD, constants module with OS paths/env overrides, 33 passing tests","dependencies":[{"issue_id":"gno-8db.2","depends_on_id":"gno-8db","type":"parent-child","created_at":"2025-12-23T14:51:06.354719+01:00","created_by":"daemon"}]}
{"id":"gno-8db.3","title":"T0.3: CI pipeline (typecheck + tests)","description":"Set up GitHub Actions CI with typecheck and test steps. Must pass before merge. Reference: docs/prd.md §22 EPIC 0.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-23T14:51:11.468652+01:00","updated_at":"2025-12-23T15:22:11.552925+01:00","closed_at":"2025-12-23T15:22:11.552925+01:00","close_reason":"GitHub Actions CI workflow created at .github/workflows/ci.yml with lint+typecheck+test","dependencies":[{"issue_id":"gno-8db.3","depends_on_id":"gno-8db","type":"parent-child","created_at":"2025-12-23T14:51:11.469772+01:00","created_by":"daemon"},{"issue_id":"gno-8db.3","depends_on_id":"gno-8db.1","type":"blocks","created_at":"2025-12-23T14:53:47.332241+01:00","created_by":"daemon"}]}
{"id":"gno-8l3","title":"Pager for long output","description":"Per clig.dev: Use a pager if outputting a lot of text. For commands like ls with many results, pipe through pager when TTY. Consider spawning less/more when stdout.isTTY and output exceeds terminal height.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-25T11:33:36.286028+01:00","updated_at":"2025-12-25T11:33:36.286028+01:00","dependencies":[{"issue_id":"gno-8l3","depends_on_id":"gno-amf","type":"parent-child","created_at":"2025-12-27T11:22:51.611893+01:00","created_by":"daemon"}]}
{"id":"gno-a7n","title":"EPIC 3: Store layer (SQLite + migrations)","status":"closed","priority":0,"issue_type":"epic","created_at":"2025-12-23T14:50:55.681794+01:00","updated_at":"2025-12-23T22:33:06.842918+01:00","closed_at":"2025-12-23T22:33:06.842918+01:00","close_reason":"Implemented in previous session - migrations, core tables, adapter, status queries all complete. 191 tests passing.","dependencies":[{"issue_id":"gno-a7n","depends_on_id":"gno-8db","type":"blocks","created_at":"2025-12-23T14:53:22.307858+01:00","created_by":"daemon"}],"comments":[{"id":6,"issue_id":"gno-a7n","author":"gordon","text":"Spec: spec/db/schema.sql (placeholder). See docs/prd.md §9 for storage model.","created_at":"2025-12-23T15:15:15Z"}]}
{"id":"gno-a7n.1","title":"T3.1: Implement migrations runner","description":"SQLite migrations system. DB path: \u003cdataDir\u003e/index-\u003cindexName\u003e.sqlite. Run migrations on init/first access. Use bun:sqlite. Reference: docs/prd.md §9.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-23T14:51:35.842255+01:00","updated_at":"2025-12-23T22:33:06.834594+01:00","closed_at":"2025-12-23T22:33:06.834594+01:00","close_reason":"Implemented in previous session - migrations, core tables, adapter, status queries all complete. 191 tests passing.","dependencies":[{"issue_id":"gno-a7n.1","depends_on_id":"gno-a7n","type":"parent-child","created_at":"2025-12-23T14:51:35.84334+01:00","created_by":"daemon"}]}
{"id":"gno-a7n.2","title":"T3.2: Implement core tables and queries","description":"Tables: collections, contexts, documents, content, content_chunks, content_fts (FTS5), content_vectors, llm_cache, ingest_errors. Key fields in docs/prd.md §9.2. Use bun:sqlite.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-23T14:51:37.189504+01:00","updated_at":"2025-12-23T22:33:06.837896+01:00","closed_at":"2025-12-23T22:33:06.837896+01:00","close_reason":"Implemented in previous session - migrations, core tables, adapter, status queries all complete. 191 tests passing.","dependencies":[{"issue_id":"gno-a7n.2","depends_on_id":"gno-a7n","type":"parent-child","created_at":"2025-12-23T14:51:37.190574+01:00","created_by":"daemon"},{"issue_id":"gno-a7n.2","depends_on_id":"gno-a7n.1","type":"blocks","created_at":"2025-12-23T14:53:50.881346+01:00","created_by":"daemon"}]}
{"id":"gno-a7n.3","title":"T3.3: Status/health queries","description":"Queries for gno status: document counts, chunk counts, embedding backlog, last update time, conversion error summary. Reference: docs/prd.md §14.2.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-23T14:51:38.703569+01:00","updated_at":"2025-12-23T22:33:06.841251+01:00","closed_at":"2025-12-23T22:33:06.841251+01:00","close_reason":"Implemented in previous session - migrations, core tables, adapter, status queries all complete. 191 tests passing.","dependencies":[{"issue_id":"gno-a7n.3","depends_on_id":"gno-a7n","type":"parent-child","created_at":"2025-12-23T14:51:38.704696+01:00","created_by":"daemon"},{"issue_id":"gno-a7n.3","depends_on_id":"gno-a7n.2","type":"blocks","created_at":"2025-12-23T14:53:51.861071+01:00","created_by":"daemon"}]}
{"id":"gno-amf","title":"EPIC: CLI Polish (P3 Future)","status":"open","priority":3,"issue_type":"epic","created_at":"2025-12-25T11:33:22.703527+01:00","updated_at":"2025-12-25T11:33:22.703527+01:00"}
{"id":"gno-c2t","title":"Mirror hash join duplication","description":"## Problem\n\nMultiple active docs can share `mirror_hash` (content-addressed storage). FTS query in `adapter.ts:639-657` joins on `mirror_hash`, causing duplicate results when same chunk matches multiple docs.\n\n## Semantics Decision\n\n**Result unit**: URI-centric (each unique uri+chunk appears once). If same content exists in two files, both appear in results with their own URI. We only eliminate *true duplicates* (same URI row repeated due to join fan-out).\n\nNote: `docid` is derived from `source_hash` (schema.sql:75), so two identical files share the same docid. We partition by `uri` to preserve distinct file results.\n\n## Approach\n\nUse **window function** to pick deterministic document row per URI+chunk:\n```sql\nSELECT * FROM (\n  SELECT \n    d.docid, d.uri, d.title, d.collection, d.rel_path,\n    c.mirror_hash, c.seq, c.chunk_text,\n    bm25(content_fts) AS score,\n    snippet(...) AS snippet,\n    ROW_NUMBER() OVER (PARTITION BY d.uri, c.seq ORDER BY d.id) AS rn\n  FROM content_fts\n  JOIN content_chunks c ON c.rowid = content_fts.rowid\n  JOIN documents d ON d.mirror_hash = c.mirror_hash AND d.active = 1\n  WHERE content_fts MATCH ?\n) WHERE rn = 1\nORDER BY score\n```\n\nThis:\n- Picks first doc row (by d.id) when same URI has multiple active versions\n- Preserves all different URIs even if they share content\n- Keeps score/snippet row-consistent with selected doc\n- Matches `--full` mode's `bestByDocid` semantics (formalized in SQL)\n\n## Key Context\n\n- Schema: `mirror_hash TEXT` is NOT unique (`spec/db/schema.sql:80`)\n- Schema: `docid` derived from `source_hash` - identical files share docid\n- Partition by `uri` not `docid` to preserve distinct file results\n- Requires SQLite ≥3.25.0 (window functions) - Bun ships modern SQLite\n\n## Files to Modify\n\n1. `src/store/sqlite/adapter.ts:639-658` - Add ROW_NUMBER window + WHERE rn = 1\n\n## Acceptance Checks\n\n- [ ] Same URI with duplicate rows returns single result\n- [ ] Different URIs sharing mirror_hash/docid both appear\n- [ ] Score and snippet correspond to selected document row\n- [ ] Tests pass with new dedup behavior","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-25T23:09:40.87646+01:00","updated_at":"2025-12-28T12:31:57.378658+01:00","closed_at":"2025-12-28T12:31:57.378658+01:00","close_reason":"Closed","dependencies":[{"issue_id":"gno-c2t","depends_on_id":"gno-h7i.1","type":"blocks","created_at":"2025-12-25T23:11:56.516325+01:00","created_by":"daemon"},{"issue_id":"gno-c2t","depends_on_id":"gno-h7i","type":"parent-child","created_at":"2025-12-27T11:23:12.371787+01:00","created_by":"daemon"}]}
{"id":"gno-c6p","title":"Man pages generation","description":"Per clig.dev: Consider providing man pages. Generate from spec/cli.md using tool like ronn or similar. Install via npm postinstall to /usr/local/share/man/man1/gno.1","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-25T11:33:37.810303+01:00","updated_at":"2025-12-25T11:33:37.810303+01:00","dependencies":[{"issue_id":"gno-c6p","depends_on_id":"gno-amf","type":"parent-child","created_at":"2025-12-27T11:22:53.760594+01:00","created_by":"daemon"}]}
{"id":"gno-du9","title":"EPIC 2: Config, collections, contexts","status":"closed","priority":0,"issue_type":"epic","created_at":"2025-12-23T14:50:54.20082+01:00","updated_at":"2025-12-23T17:25:42.315837+01:00","closed_at":"2025-12-23T17:25:42.315837+01:00","close_reason":"EPIC 2 complete: config schema, loader/saver, collection/context/init commands, multilingual support","dependencies":[{"issue_id":"gno-du9","depends_on_id":"gno-8db","type":"blocks","created_at":"2025-12-23T14:53:21.844389+01:00","created_by":"daemon"}],"comments":[{"id":4,"issue_id":"gno-du9","author":"gordon","text":"Spec: spec/cli.md §init/collection/context commands. Follow exit codes and flag conventions from spec.","created_at":"2025-12-23T15:14:58Z"}]}
{"id":"gno-du9.1","title":"T2.1: Config schema + loader/saver (YAML), XDG defaults, overrides","description":"Implement config loading from YAML file at \u003cconfigDir\u003e/index.yml. Support XDG paths (Linux), Library/Application Support (macOS), AppData (Windows). Environment overrides: GNO_CONFIG_DIR, GNO_DATA_DIR, GNO_CACHE_DIR. Reference: docs/prd.md §2.1-§2.3.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-23T14:51:18.67131+01:00","updated_at":"2025-12-23T17:06:54.49475+01:00","closed_at":"2025-12-23T17:06:54.49475+01:00","close_reason":"Config schema, loader, saver complete with tests","dependencies":[{"issue_id":"gno-du9.1","depends_on_id":"gno-du9","type":"parent-child","created_at":"2025-12-23T14:51:18.671976+01:00","created_by":"daemon"}]}
{"id":"gno-du9.2","title":"T2.2: collection add/list/remove/rename commands","description":"Implement CLI commands for collection management. Collection has: name, path (absolute), pattern (glob), optional include/exclude, optional update command, optional languageHint (BCP-47). Reference: docs/prd.md §7.1 and §14.2.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-23T14:51:19.817482+01:00","updated_at":"2025-12-23T17:21:29.350917+01:00","closed_at":"2025-12-23T17:21:29.350917+01:00","close_reason":"Implemented: all commands working, 43 tests passing","dependencies":[{"issue_id":"gno-du9.2","depends_on_id":"gno-du9","type":"parent-child","created_at":"2025-12-23T14:51:19.818261+01:00","created_by":"daemon"},{"issue_id":"gno-du9.2","depends_on_id":"gno-du9.1","type":"blocks","created_at":"2025-12-23T14:53:48.757205+01:00","created_by":"daemon"}]}
{"id":"gno-du9.3","title":"T2.3: context add/list/check/rm including global and prefix contexts","description":"Implement context management. Scopes: global (/), collection (collection:name), prefix (gno://collection/prefix). Contexts are human metadata that can enrich search results. Reference: docs/prd.md §4.5 and §14.2.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-23T14:51:21.290511+01:00","updated_at":"2025-12-23T17:21:29.355564+01:00","closed_at":"2025-12-23T17:21:29.355564+01:00","close_reason":"Implemented: all commands working, 43 tests passing","dependencies":[{"issue_id":"gno-du9.3","depends_on_id":"gno-du9","type":"parent-child","created_at":"2025-12-23T14:51:21.291374+01:00","created_by":"daemon"},{"issue_id":"gno-du9.3","depends_on_id":"gno-du9.1","type":"blocks","created_at":"2025-12-23T14:53:49.452776+01:00","created_by":"daemon"}]}
{"id":"gno-du9.4","title":"T2.4: init command (idempotent, creates config+DB, optional collection add)","description":"gno init [\u003cpath\u003e] [--name] [--pattern] [--yes] creates config if missing, runs DB migrations, optionally adds collection. Must be idempotent and safe to run repeatedly. Print resolved paths. Reference: docs/prd.md §7.1.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-23T14:51:22.676865+01:00","updated_at":"2025-12-23T17:21:29.357656+01:00","closed_at":"2025-12-23T17:21:29.357656+01:00","close_reason":"Implemented: all commands working, 43 tests passing","dependencies":[{"issue_id":"gno-du9.4","depends_on_id":"gno-du9","type":"parent-child","created_at":"2025-12-23T14:51:22.677686+01:00","created_by":"daemon"},{"issue_id":"gno-du9.4","depends_on_id":"gno-du9.1","type":"blocks","created_at":"2025-12-23T14:53:50.13721+01:00","created_by":"daemon"}]}
{"id":"gno-du9.5","title":"T2.5: Multilingual config (collection languageHint, index ftsTokenizer)","description":"Collection-level languageHint (BCP-47: de/fr/it/en/und). Index-level ftsTokenizer: unicode61 (default, multilingual), porter (English stemming, opt-in), trigram (optional). Reference: docs/prd.md §7.1.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T14:51:24.065653+01:00","updated_at":"2025-12-23T17:25:34.515185+01:00","closed_at":"2025-12-23T17:25:34.515185+01:00","close_reason":"Added BCP-47 validation, --tokenizer and --language flags to init, 6 new tests","dependencies":[{"issue_id":"gno-du9.5","depends_on_id":"gno-du9","type":"parent-child","created_at":"2025-12-23T14:51:24.066362+01:00","created_by":"daemon"}]}
{"id":"gno-eb8","title":"Tab completion scripts","description":"Commander supports generating completion scripts for bash/zsh/fish. Add gno completion subcommand that outputs shell-specific completion script. Install instructions in docs.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-25T11:33:39.297314+01:00","updated_at":"2025-12-25T11:33:39.297314+01:00","dependencies":[{"issue_id":"gno-eb8","depends_on_id":"gno-amf","type":"parent-child","created_at":"2025-12-27T11:22:56.195+01:00","created_by":"daemon"}]}
{"id":"gno-ga7","title":"Model configurability via env vars and config","description":"Allow users to override default model presets.\n\nProposed env vars:\n- GNO_EMBED_MODEL - override embed model URI\n- GNO_RERANK_MODEL - override rerank model URI  \n- GNO_GEN_MODEL - override generation model URI\n\nConfig file support:\n- models.embed / models.rerank / models.gen in gno.yml\n- Precedence: env vars \u003e config file \u003e preset defaults\n\nUse cases:\n- Switch to smaller/faster models for testing\n- Use custom fine-tuned models\n- Avoid downloading large models in CI","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-25T00:04:01.860101+01:00","updated_at":"2025-12-25T00:04:01.860101+01:00","dependencies":[{"issue_id":"gno-ga7","depends_on_id":"gno-74v","type":"discovered-from","created_at":"2025-12-27T11:23:25.686139+01:00","created_by":"daemon"},{"issue_id":"gno-ga7","depends_on_id":"gno-v8w","type":"parent-child","created_at":"2025-12-27T11:23:34.274077+01:00","created_by":"daemon"}]}
{"id":"gno-h35","title":"Update memorybot repo to link gno as successor","description":"Update https://github.com/gmickel/memorybot README to mention gno as the spiritual successor. Add deprecation notice or link in description.","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-26T00:37:36.787992+01:00","updated_at":"2025-12-26T00:37:42.933398+01:00"}
{"id":"gno-h7i","title":"EPIC 8: Search pipelines","status":"open","priority":0,"issue_type":"epic","created_at":"2025-12-23T14:51:24.157816+01:00","updated_at":"2025-12-25T11:14:13.342959+01:00","dependencies":[{"issue_id":"gno-h7i","depends_on_id":"gno-i7b","type":"blocks","created_at":"2025-12-23T14:53:26.254479+01:00","created_by":"daemon"},{"issue_id":"gno-h7i","depends_on_id":"gno-ia1","type":"blocks","created_at":"2025-12-23T14:53:26.866972+01:00","created_by":"daemon"}],"comments":[{"id":2,"issue_id":"gno-h7i","author":"gordon","text":"Spec: spec/cli.md §search/vsearch/query/ask. Output must match spec/output-schemas/search-result.schema.json","created_at":"2025-12-23T15:14:56Z"},{"id":14,"issue_id":"gno-h7i","author":"gordon","text":"T8.1-T8.3 incomplete: --full/--line-numbers missing","created_at":"2025-12-25T10:14:13Z"}]}
{"id":"gno-h7i.1","title":"T8.1: gno search (BM25/FTS only)","description":"FTS-only search. Options: -n limit, --min-score, -c collection, --full, --line-numbers, --lang. Output: docid, score, uri, title, snippet, snippetRange, source metadata. Reference: docs/prd.md §12.1 and §15.1.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-23T14:51:31.203781+01:00","updated_at":"2025-12-25T23:35:29.485203+01:00","closed_at":"2025-12-25T23:35:29.485203+01:00","close_reason":"Implemented in PR #9","dependencies":[{"issue_id":"gno-h7i.1","depends_on_id":"gno-h7i","type":"parent-child","created_at":"2025-12-23T14:51:31.204653+01:00","created_by":"daemon"}],"comments":[{"id":11,"issue_id":"gno-h7i.1","author":"gordon","text":"--full not used, --line-numbers not implemented per PRD §14.3","created_at":"2025-12-25T10:14:07Z"}]}
{"id":"gno-h7i.2","title":"T8.2: gno vsearch (vector only)","description":"Vector similarity search. Same output schema as search. Graceful error if vectors unavailable (suggest gno index/embed). Reference: docs/prd.md §12.1 and §11.3.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-23T14:51:36.917073+01:00","updated_at":"2025-12-25T23:35:29.489093+01:00","closed_at":"2025-12-25T23:35:29.489093+01:00","close_reason":"Implemented in PR #9","dependencies":[{"issue_id":"gno-h7i.2","depends_on_id":"gno-h7i","type":"parent-child","created_at":"2025-12-23T14:51:36.917878+01:00","created_by":"daemon"}],"comments":[{"id":12,"issue_id":"gno-h7i.2","author":"gordon","text":"--full not used, --line-numbers not implemented per PRD §14.3","created_at":"2025-12-25T10:14:07Z"}]}
{"id":"gno-h7i.3","title":"T8.3: gno query hybrid pipeline (expansion, fusion, rerank, blend)","description":"Full hybrid: 1) structured query expansion (lexical+semantic+HyDE), 2) parallel BM25+vector retrieval, 3) RRF fusion (k=60) + top-rank bonus, 4) cross-encoder rerank, 5) position-aware blending. --explain prints scoring details. Reference: docs/prd.md §12.2-§12.7.\n\n**Implementation Plan:** plans/t8.3-t8.4-hybrid-ask.md\n\n**Key tasks:**\n- T8.3.1: Fix rerank score normalization (always output [0,1])\n- T8.3.2: Apply --min-score consistently\n- T8.3.3: Implement --full support\n- T8.3.4: Make query formatting consistent with search/vsearch\n- T8.3.5: Consolidate explain formatting","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-23T14:51:44.783705+01:00","updated_at":"2025-12-26T22:14:58.95395+01:00","closed_at":"2025-12-26T22:14:58.95395+01:00","close_reason":"Merged PR #10 with hybrid query, ask command, citations, grounded answers","dependencies":[{"issue_id":"gno-h7i.3","depends_on_id":"gno-h7i","type":"parent-child","created_at":"2025-12-23T14:51:44.784754+01:00","created_by":"daemon"},{"issue_id":"gno-h7i.3","depends_on_id":"gno-h7i.1","type":"blocks","created_at":"2025-12-23T14:53:59.568648+01:00","created_by":"daemon"},{"issue_id":"gno-h7i.3","depends_on_id":"gno-h7i.2","type":"blocks","created_at":"2025-12-23T14:54:00.395631+01:00","created_by":"daemon"}],"comments":[{"id":13,"issue_id":"gno-h7i.3","author":"gordon","text":"--full not used, --line-numbers not implemented per PRD §14.3","created_at":"2025-12-25T10:14:07Z"}]}
{"id":"gno-h7i.4","title":"T8.4: gno ask command (citations-first, optional grounded answer)","description":"Wrapper over query. Default: citations/snippets only. --answer enables short grounded synthesis (requires gen model). Output includes citations array with docid/uri/lineRange. Reference: docs/prd.md §12.1, §14.4, §15.4.\n\n**Implementation Plan:** plans/t8.3-t8.4-hybrid-ask.md\n\n**Key tasks:**\n- T8.4.1: Align CLI flags with spec (--answer default false)\n- T8.4.2: Eliminate silent failures when --answer requested\n- T8.4.3: Bound context size + citation integrity","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-23T14:51:51.435564+01:00","updated_at":"2025-12-26T22:14:58.959436+01:00","closed_at":"2025-12-26T22:14:58.959436+01:00","close_reason":"Merged PR #10 with hybrid query, ask command, citations, grounded answers","dependencies":[{"issue_id":"gno-h7i.4","depends_on_id":"gno-h7i","type":"parent-child","created_at":"2025-12-23T14:51:51.436991+01:00","created_by":"daemon"},{"issue_id":"gno-h7i.4","depends_on_id":"gno-h7i.3","type":"blocks","created_at":"2025-12-23T14:54:01.301375+01:00","created_by":"daemon"}],"comments":[{"id":19,"issue_id":"gno-h7i.4","author":"gordon","text":"Depends on T8.3 which is still open; grounded answer not fully tested","created_at":"2025-12-26T00:19:38Z"}]}
{"id":"gno-h7i.5","title":"T8.5: Multilingual awareness (query lang detection, prompt selection)","description":"## Implementation Plan\n\n**Plan file**: plans/t8.5-multilingual-awareness.md\n\n### CRITICAL DISTINCTION\nDetected language affects **prompt selection only**, NOT retrieval filtering. `--lang` CLI flag remains the only way to filter by chunk language.\n\n### Approach\n1. Install franc + iso-639-3 for deterministic language detection\n2. New `src/pipeline/query-language.ts` with detectQueryLanguage()\n3. Hook into pipeline for prompt selection + metadata (NOT retrieval)\n4. Resolution: --lang flag \u003e detected \u003e collection hint \u003e 'und'\n\n### Key Design Decisions\n- Module in `src/pipeline/` (not src/search/) - aligns with codebase architecture\n- Build ISO 639-3→BCP-47 mapping from dataset array at init\n- MIN_RELIABLE_LENGTH = 15 chars (returns 'und' if shorter)\n- Detection does NOT change FTS/vector chunk filters\n\n### Files\n- src/pipeline/query-language.ts (new)\n- src/pipeline/hybrid.ts (detect for prompt selection)\n- src/pipeline/search.ts (meta.lang output)\n- src/pipeline/vsearch.ts (meta.lang output)\n- src/cli/commands/ask.ts (AskResult.queryLanguage)\n- test/pipeline/query-language.test.ts (new)\n\n### Review Findings Addressed\n1. ✅ CRITICAL: Separated queryLanguage (prompts) from options.lang (retrieval filter)\n2. ✅ MAJOR: Moved to src/pipeline/ (not src/search/)\n3. ✅ MAJOR: Fixed iso-639-3 API\n4. ✅ MAJOR: Collection hint only when single collection + uncertain detection","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T14:51:56.926996+01:00","updated_at":"2025-12-29T00:13:05.115961+01:00","closed_at":"2025-12-29T00:13:05.115961+01:00","close_reason":"Implemented query language detection with franc + iso-639-3, integrated into hybrid/search/vsearch pipelines for prompt selection, added 13 unit tests","dependencies":[{"issue_id":"gno-h7i.5","depends_on_id":"gno-h7i","type":"parent-child","created_at":"2025-12-23T14:51:56.927877+01:00","created_by":"daemon"}]}
{"id":"gno-h7i.5.1","title":"Install franc + iso-639-3 dependencies","description":"Run bun add franc iso-639-3. Verify ESM packages work with Bun. Both are ESM-only, no CommonJS.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T23:57:33.567274+01:00","updated_at":"2025-12-29T00:07:12.566511+01:00","closed_at":"2025-12-29T00:07:12.566511+01:00","close_reason":"Closed","dependencies":[{"issue_id":"gno-h7i.5.1","depends_on_id":"gno-h7i.5","type":"parent-child","created_at":"2025-12-28T23:57:33.573536+01:00","created_by":"daemon"}]}
{"id":"gno-h7i.5.2","title":"Create src/pipeline/query-language.ts module","description":"Implement detectQueryLanguage(text): returns {bcp47, iso639_3, confident}. Build ISO 639-3→BCP-47 mapping from iso6393 dataset array at module init. Use franc with only:[10 major langs] filter. MIN_RELIABLE_LENGTH=15 chars.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T23:57:35.14252+01:00","updated_at":"2025-12-29T00:08:11.460672+01:00","closed_at":"2025-12-29T00:08:11.460672+01:00","close_reason":"Closed","dependencies":[{"issue_id":"gno-h7i.5.2","depends_on_id":"gno-h7i.5","type":"parent-child","created_at":"2025-12-28T23:57:35.148374+01:00","created_by":"daemon"},{"issue_id":"gno-h7i.5.2","depends_on_id":"gno-h7i.5.1","type":"blocks","created_at":"2025-12-28T23:57:46.33258+01:00","created_by":"daemon"}]}
{"id":"gno-h7i.5.3","title":"Hook detection into pipeline entry points","description":"Hook detection into hybrid.ts, search.ts, vsearch.ts for PROMPT SELECTION and METADATA only. CRITICAL: Detection does NOT change FTS/vector retrieval filters - options.lang remains explicit user filter only. Pass queryLanguage to expandQuery and meta output.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T23:57:36.535606+01:00","updated_at":"2025-12-29T00:10:46.007295+01:00","closed_at":"2025-12-29T00:10:46.007295+01:00","close_reason":"Closed","dependencies":[{"issue_id":"gno-h7i.5.3","depends_on_id":"gno-h7i.5","type":"parent-child","created_at":"2025-12-28T23:57:36.546961+01:00","created_by":"daemon"},{"issue_id":"gno-h7i.5.3","depends_on_id":"gno-h7i.5.2","type":"blocks","created_at":"2025-12-28T23:57:46.504484+01:00","created_by":"daemon"}]}
{"id":"gno-h7i.5.4","title":"Add unit tests for detectQueryLanguage","description":"New file test/pipeline/query-language.test.ts. Test cases: known strings (en/de/fr), short text returns 'und', determinism (same input = same output), edge cases (empty, whitespace, code), ISO mapping verification.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T23:57:37.660254+01:00","updated_at":"2025-12-29T00:11:44.833431+01:00","closed_at":"2025-12-29T00:11:44.833431+01:00","close_reason":"Closed","dependencies":[{"issue_id":"gno-h7i.5.4","depends_on_id":"gno-h7i.5","type":"parent-child","created_at":"2025-12-28T23:57:37.668371+01:00","created_by":"daemon"},{"issue_id":"gno-h7i.5.4","depends_on_id":"gno-h7i.5.2","type":"blocks","created_at":"2025-12-28T23:57:46.666447+01:00","created_by":"daemon"}]}
{"id":"gno-h7i.6","title":"Migrate from bun:sqlite to better-sqlite3 for cross-platform sqlite-vec support","description":"## Problem\n\nbun:sqlite bundled SQLite doesn't support dynamic extension loading, which breaks sqlite-vec (vector search).\n\nCurrent workaround uses Database.setCustomSQLite() to load Homebrew SQLite on macOS, but this:\n- Requires users to install Homebrew + sqlite3 on macOS\n- Doesn't work on Windows\n- Requires system packages on Linux\n- Not portable or user-friendly\n\n## Solution\n\nMigrate from bun:sqlite to better-sqlite3:\n- Native extension support on all platforms\n- Prebuilt binaries for Windows/Linux/macOS (via prebuild)\n- Standard approach used by sqlite-vec examples\n\n## Implementation\n\n1. Add better-sqlite3 dependency\n2. Create adapter abstraction if needed for type compatibility\n3. Update src/store/sqlite/adapter.ts to use better-sqlite3\n4. Update src/store/vector/sqlite-vec.ts to use better-sqlite3 API\n5. Remove src/store/sqlite/setup.ts workaround\n6. Test on macOS, Linux, Windows\n7. Update README with any remaining requirements\n\n## Acceptance criteria\n\n- Vector search works on macOS without Homebrew SQLite\n- Vector search works on Linux without extra packages\n- Vector search works on Windows\n- All existing tests pass\n- No user-facing installation steps beyond bun install","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-26T00:30:28.10551+01:00","updated_at":"2025-12-28T11:29:12.217873+01:00","closed_at":"2025-12-28T11:29:12.217873+01:00","close_reason":"Not needed: bun:sqlite works natively on Linux/Windows. macOS uses Homebrew workaround. See aaf9282.","dependencies":[{"issue_id":"gno-h7i.6","depends_on_id":"gno-h7i","type":"parent-child","created_at":"2025-12-26T00:30:28.110118+01:00","created_by":"daemon"}]}
{"id":"gno-i7b","title":"EPIC 5: Indexing sync (gno update) and FTS","status":"closed","priority":0,"issue_type":"epic","created_at":"2025-12-23T14:51:02.649426+01:00","updated_at":"2025-12-24T13:48:44.535668+01:00","closed_at":"2025-12-24T13:48:44.535668+01:00","close_reason":"Merged to main","dependencies":[{"issue_id":"gno-i7b","depends_on_id":"gno-a7n","type":"blocks","created_at":"2025-12-23T14:53:23.783345+01:00","created_by":"daemon"},{"issue_id":"gno-i7b","depends_on_id":"gno-mu3","type":"blocks","created_at":"2025-12-23T14:53:24.410113+01:00","created_by":"daemon"}]}
{"id":"gno-i7b.1","title":"T5.1: File walker + include/exclude logic + path normalization","description":"Walk collection directory matching glob pattern. Support include (extensions allowlist) and exclude (patterns like .git, node_modules). Deterministic path normalization. Use Bun.file for reading. Reference: docs/prd.md §7.1.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-23T14:51:10.840099+01:00","updated_at":"2025-12-24T13:48:44.536938+01:00","closed_at":"2025-12-24T13:48:44.536938+01:00","close_reason":"Merged to main","dependencies":[{"issue_id":"gno-i7b.1","depends_on_id":"gno-i7b","type":"parent-child","created_at":"2025-12-23T14:51:10.841717+01:00","created_by":"daemon"}]}
{"id":"gno-i7b.2","title":"T5.2: Sync algorithm (hash, convert, upsert, soft-delete)","description":"For each file: stat, read bytes, compute source_hash (sha256), detect MIME, convert to markdown mirror, compute mirror_hash, upsert doc keyed by (collection, relativePath). Mark missing files inactive. Store converter_id/version. Reference: docs/prd.md §7.2.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-23T14:51:17.926108+01:00","updated_at":"2025-12-24T13:48:44.538463+01:00","closed_at":"2025-12-24T13:48:44.538463+01:00","close_reason":"Merged to main","dependencies":[{"issue_id":"gno-i7b.2","depends_on_id":"gno-i7b","type":"parent-child","created_at":"2025-12-23T14:51:17.926772+01:00","created_by":"daemon"},{"issue_id":"gno-i7b.2","depends_on_id":"gno-i7b.1","type":"blocks","created_at":"2025-12-23T14:53:55.253943+01:00","created_by":"daemon"}]}
{"id":"gno-i7b.3","title":"T5.3: Chunking (deterministic, tokenizer-aware)","description":"Token-aware chunking (maxTokens=800, overlap=15%). Fallback to char-based if no tokenizer. Store in content_chunks with (mirror_hash, seq, pos, text, start_line, end_line). Reference: docs/prd.md §10.1.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-23T14:51:24.734987+01:00","updated_at":"2025-12-24T13:48:58.351201+01:00","closed_at":"2025-12-24T13:48:58.351201+01:00","close_reason":"Implemented in EPIC 5 PR","dependencies":[{"issue_id":"gno-i7b.3","depends_on_id":"gno-i7b","type":"parent-child","created_at":"2025-12-23T14:51:24.735894+01:00","created_by":"daemon"},{"issue_id":"gno-i7b.3","depends_on_id":"gno-i7b.2","type":"blocks","created_at":"2025-12-23T14:53:56.172494+01:00","created_by":"daemon"}]}
{"id":"gno-i7b.4","title":"T5.4: FTS5 indexing over chunks + snippet extraction","description":"FTS5 virtual table over chunk text. Default tokenizer unicode61. Snippet extraction with optional line ranges. Reference: docs/prd.md §10.3-§10.4.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-23T14:51:31.934194+01:00","updated_at":"2025-12-26T22:19:21.667532+01:00","closed_at":"2025-12-26T22:19:21.667532+01:00","close_reason":"Implemented - embed --force works, FTS5 over chunks exists, markitdown-ts adapter exists","dependencies":[{"issue_id":"gno-i7b.4","depends_on_id":"gno-i7b","type":"parent-child","created_at":"2025-12-23T14:51:31.935437+01:00","created_by":"daemon"},{"issue_id":"gno-i7b.4","depends_on_id":"gno-i7b.3","type":"blocks","created_at":"2025-12-23T14:53:57.04403+01:00","created_by":"daemon"}]}
{"id":"gno-i7b.5","title":"T5.5: gno status and gno cleanup commands","description":"gno status shows doc/chunk counts, embedding backlog, errors. gno cleanup removes orphaned content/chunks/vectors not referenced by active docs. Reference: docs/prd.md §7.2 and §14.2.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T14:51:38.665495+01:00","updated_at":"2025-12-24T13:48:58.352845+01:00","closed_at":"2025-12-24T13:48:58.352845+01:00","close_reason":"Implemented in EPIC 5 PR","dependencies":[{"issue_id":"gno-i7b.5","depends_on_id":"gno-i7b","type":"parent-child","created_at":"2025-12-23T14:51:38.671208+01:00","created_by":"daemon"}]}
{"id":"gno-i7b.6","title":"T5.6: index command wrapper (update + embed)","description":"gno index [--no-embed] [--collection] [--models-pull] [--yes] runs update then embed. Human-friendly alias. Reference: docs/prd.md §7.2.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-23T14:51:44.622449+01:00","updated_at":"2025-12-24T13:48:58.354167+01:00","closed_at":"2025-12-24T13:48:58.354167+01:00","close_reason":"Implemented in EPIC 5 PR","dependencies":[{"issue_id":"gno-i7b.6","depends_on_id":"gno-i7b","type":"parent-child","created_at":"2025-12-23T14:51:44.623436+01:00","created_by":"daemon"}]}
{"id":"gno-i7b.7","title":"T5.7: Language tagging (document hint, per-chunk detection)","description":"Store document language_hint from converter. Deterministic per-chunk language detection (no network, pinned detector version). Store chunk.language (BCP-47 or und). Surface snippetLanguage in outputs. Reference: docs/prd.md §10.2.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T14:51:51.110541+01:00","updated_at":"2025-12-24T13:48:58.355217+01:00","closed_at":"2025-12-24T13:48:58.355217+01:00","close_reason":"Implemented in EPIC 5 PR","dependencies":[{"issue_id":"gno-i7b.7","depends_on_id":"gno-i7b","type":"parent-child","created_at":"2025-12-23T14:51:51.111482+01:00","created_by":"daemon"}]}
{"id":"gno-ia1","title":"EPIC 7: Vector index and embeddings workflow (gno embed)","status":"closed","priority":0,"issue_type":"epic","created_at":"2025-12-23T14:50:52.065476+01:00","updated_at":"2025-12-25T00:17:00.316924+01:00","closed_at":"2025-12-25T00:17:00.316924+01:00","close_reason":"EPIC 7 complete: vector index, stats, embed command merged","dependencies":[{"issue_id":"gno-ia1","depends_on_id":"gno-i7b","type":"blocks","created_at":"2025-12-23T14:53:25.019329+01:00","created_by":"daemon"},{"issue_id":"gno-ia1","depends_on_id":"gno-v8w","type":"blocks","created_at":"2025-12-23T14:53:25.635746+01:00","created_by":"daemon"}]}
{"id":"gno-ia1.1","title":"T7.1: sqlite-vec integration (handle optional deps cleanly)","description":"Integrate sqlite-vec for vector storage. Handle as optional dep - graceful degradation if unavailable. content_vectors table: (mirror_hash, seq, model) PK, embedding blob, embedded_at. Reference: docs/prd.md §9.2.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-23T14:50:59.042823+01:00","updated_at":"2025-12-25T00:16:55.088243+01:00","closed_at":"2025-12-25T00:16:55.088243+01:00","close_reason":"Completed in EPIC 7 vector embeddings PR","dependencies":[{"issue_id":"gno-ia1.1","depends_on_id":"gno-ia1","type":"parent-child","created_at":"2025-12-23T14:50:59.044367+01:00","created_by":"daemon"}]}
{"id":"gno-ia1.2","title":"T7.2: Embedding backlog detection","description":"Query chunks without embeddings for current model. Report backlog count in 'gno status'. Reference: docs/prd.md §7.3.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-23T14:51:05.362607+01:00","updated_at":"2025-12-25T00:16:55.091019+01:00","closed_at":"2025-12-25T00:16:55.091019+01:00","close_reason":"Completed in EPIC 7 vector embeddings PR","dependencies":[{"issue_id":"gno-ia1.2","depends_on_id":"gno-ia1","type":"parent-child","created_at":"2025-12-23T14:51:05.363433+01:00","created_by":"daemon"}]}
{"id":"gno-ia1.3","title":"T7.3: Batch embed chunks and store vectors per model","description":"'gno embed [--force] [--model] [--batch-size]' embeds pending chunks. Store vectors keyed by (mirror_hash, seq, model). Batching for efficiency. Reference: docs/prd.md §14.2.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-23T14:51:12.646669+01:00","updated_at":"2025-12-25T00:16:55.094489+01:00","closed_at":"2025-12-25T00:16:55.094489+01:00","close_reason":"Completed in EPIC 7 vector embeddings PR","dependencies":[{"issue_id":"gno-ia1.3","depends_on_id":"gno-ia1","type":"parent-child","created_at":"2025-12-23T14:51:12.648839+01:00","created_by":"daemon"},{"issue_id":"gno-ia1.3","depends_on_id":"gno-ia1.1","type":"blocks","created_at":"2025-12-23T14:53:58.010345+01:00","created_by":"daemon"}]}
{"id":"gno-ia1.4","title":"T7.4: --force re-embed support","description":"'gno embed --force' re-embeds all chunks even if vectors exist. Useful for model upgrades. Reference: docs/prd.md §14.2.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T14:51:19.587005+01:00","updated_at":"2025-12-26T22:19:21.663794+01:00","closed_at":"2025-12-26T22:19:21.663794+01:00","close_reason":"Implemented - embed --force works, FTS5 over chunks exists, markitdown-ts adapter exists","dependencies":[{"issue_id":"gno-ia1.4","depends_on_id":"gno-ia1","type":"parent-child","created_at":"2025-12-23T14:51:19.587664+01:00","created_by":"daemon"},{"issue_id":"gno-ia1.4","depends_on_id":"gno-ia1.3","type":"blocks","created_at":"2025-12-23T14:53:58.829541+01:00","created_by":"daemon"}]}
{"id":"gno-kos","title":"EPIC 1: Specs and contract tests (freeze interfaces early)","status":"closed","priority":0,"issue_type":"epic","created_at":"2025-12-23T14:51:18.383285+01:00","updated_at":"2025-12-23T16:02:09.832329+01:00","closed_at":"2025-12-23T16:02:09.832329+01:00","close_reason":"All child tasks complete"}
{"id":"gno-kos.1","title":"T1.1: Write spec/cli.md (commands, flags, exit codes, output formats)","description":"Document all CLI commands from §14, flags, exit codes (0/1/2), output format flags (--json/--files/--csv/--md/--xml). Reference: docs/prd.md §14.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-23T14:51:24.753932+01:00","updated_at":"2025-12-23T16:02:03.058238+01:00","closed_at":"2025-12-23T16:02:03.058238+01:00","close_reason":"Closed","dependencies":[{"issue_id":"gno-kos.1","depends_on_id":"gno-kos","type":"parent-child","created_at":"2025-12-23T14:51:24.754712+01:00","created_by":"daemon"}]}
{"id":"gno-kos.2","title":"T1.2: Write spec/mcp.md (tools/resources, schemas, versioning)","description":"Document MCP server spec: stdio transport, tools (gno.search/vsearch/query/get/multi_get/status), resources (gno:// URIs), schema versioning rules. Reference: docs/prd.md §16.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-23T14:51:31.413516+01:00","updated_at":"2025-12-23T16:02:03.060608+01:00","closed_at":"2025-12-23T16:02:03.060608+01:00","close_reason":"Closed","dependencies":[{"issue_id":"gno-kos.2","depends_on_id":"gno-kos","type":"parent-child","created_at":"2025-12-23T14:51:31.41539+01:00","created_by":"daemon"}]}
{"id":"gno-kos.3","title":"T1.3: Write spec/output-schemas/*.json","description":"Create JSON schemas for: search result item, status payload, get payload, multi-get payload, MCP tool outputs, ask payload. Reference: docs/prd.md §15.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-23T14:51:36.670891+01:00","updated_at":"2025-12-23T16:02:03.062359+01:00","closed_at":"2025-12-23T16:02:03.062359+01:00","close_reason":"Closed","dependencies":[{"issue_id":"gno-kos.3","depends_on_id":"gno-kos","type":"parent-child","created_at":"2025-12-23T14:51:36.67212+01:00","created_by":"daemon"}]}
{"id":"gno-kos.4","title":"T1.4: Add contract tests validating JSON outputs against schemas","description":"Create bun tests that validate CLI/MCP outputs against JSON schemas from T1.3. Run before feature implementation. Reference: docs/prd.md §22 EPIC 1.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-23T14:51:43.840223+01:00","updated_at":"2025-12-23T16:02:03.064336+01:00","closed_at":"2025-12-23T16:02:03.064336+01:00","close_reason":"Closed","dependencies":[{"issue_id":"gno-kos.4","depends_on_id":"gno-kos","type":"parent-child","created_at":"2025-12-23T14:51:43.841679+01:00","created_by":"daemon"},{"issue_id":"gno-kos.4","depends_on_id":"gno-kos.3","type":"blocks","created_at":"2025-12-23T14:53:48.038719+01:00","created_by":"daemon"}]}
{"id":"gno-mu3","title":"EPIC 4: Converter subsystem (Node-only, deterministic)","status":"closed","priority":0,"issue_type":"epic","created_at":"2025-12-23T14:51:01.535858+01:00","updated_at":"2025-12-24T13:48:44.526418+01:00","closed_at":"2025-12-24T13:48:44.526418+01:00","close_reason":"Merged to main","dependencies":[{"issue_id":"gno-mu3","depends_on_id":"gno-8db","type":"blocks","created_at":"2025-12-23T14:53:22.793938+01:00","created_by":"daemon"}],"comments":[{"id":5,"issue_id":"gno-mu3","author":"gordon","text":"Spec: docs/prd.md §8 (Converter subsystem). Future: spec/converters.md. Golden fixtures in test/fixtures/conversion/","created_at":"2025-12-23T15:15:13Z"}]}
{"id":"gno-mu3.1","title":"T4.1: MIME detector + tests","description":"Implement MimeDetector interface. Layered detection: 1) extension map (.md→text/markdown, .pdf→application/pdf, etc.), 2) byte sniffing (%PDF-, PK zip header). Return {mime, ext, confidence, via}. Reference: docs/prd.md §8.5.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-23T14:51:12.397181+01:00","updated_at":"2025-12-24T13:48:44.529184+01:00","closed_at":"2025-12-24T13:48:44.529184+01:00","close_reason":"Merged to main","dependencies":[{"issue_id":"gno-mu3.1","depends_on_id":"gno-mu3","type":"parent-child","created_at":"2025-12-23T14:51:12.397528+01:00","created_by":"daemon"}]}
{"id":"gno-mu3.2","title":"T4.2: Canonical Markdown normalizer + tests","description":"Deterministic normalization rules: \\n newlines, strip \\u0000 and non-printables except \\n\\t, trim trailing whitespace per line, collapse 3+ blank lines to 2, ensure single final newline. NO timestamps or paths in output. Reference: docs/prd.md §8.4.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-23T14:51:20.38782+01:00","updated_at":"2025-12-24T13:48:44.530752+01:00","closed_at":"2025-12-24T13:48:44.530752+01:00","close_reason":"Merged to main","dependencies":[{"issue_id":"gno-mu3.2","depends_on_id":"gno-mu3","type":"parent-child","created_at":"2025-12-23T14:51:20.388842+01:00","created_by":"daemon"}]}
{"id":"gno-mu3.3","title":"T4.3: Converter interfaces, registry, error mapping + tests","description":"Types in src/converters/types.ts: ConverterId, ConvertInput, ConvertWarning, ConvertOutput, ConvertResult, Converter interface. Error codes: UNSUPPORTED, TOO_LARGE, TIMEOUT, CORRUPT, etc. Registry selects first canHandle() match. Reference: docs/prd.md §8.2-§8.3.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-23T14:51:27.667735+01:00","updated_at":"2025-12-24T13:48:44.532237+01:00","closed_at":"2025-12-24T13:48:44.532237+01:00","close_reason":"Merged to main","dependencies":[{"issue_id":"gno-mu3.3","depends_on_id":"gno-mu3","type":"parent-child","created_at":"2025-12-23T14:51:27.669107+01:00","created_by":"daemon"}]}
{"id":"gno-mu3.4","title":"T4.4: Native markdown/plaintext converters","description":"Implement native/markdown (passthrough + canonicalization) and native/plaintext (wrap as markdown + canonicalization) converters. Reference: docs/prd.md §8.6.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-23T14:51:36.670959+01:00","updated_at":"2025-12-24T13:48:44.533903+01:00","closed_at":"2025-12-24T13:48:44.533903+01:00","close_reason":"Merged to main"}
{"id":"gno-mu3.6","title":"T4.5: markitdown-js adapter + golden fixtures","description":"Adapter for markitdown-js library (NO Python). Handle pdf/docx/pptx/xlsx. Enforce maxBytes and timeoutMs. Map exceptions to ConvertError. Golden fixtures in test/fixtures/conversion/{pdf,docx,pptx,xlsx}/*.expected.md. Reference: docs/prd.md §8.7-§8.8.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-23T14:51:48.859521+01:00","updated_at":"2025-12-26T22:19:21.670628+01:00","closed_at":"2025-12-26T22:19:21.670628+01:00","close_reason":"Implemented - embed --force works, FTS5 over chunks exists, markitdown-ts adapter exists","dependencies":[{"issue_id":"gno-mu3.6","depends_on_id":"gno-mu3","type":"parent-child","created_at":"2025-12-23T14:51:48.860442+01:00","created_by":"daemon"}]}
{"id":"gno-n5m","title":"EPIC 9: Retrieval and output polish","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-12-23T14:51:02.412031+01:00","updated_at":"2025-12-27T00:58:06.079436+01:00","closed_at":"2025-12-27T00:58:06.079436+01:00","close_reason":"All children complete (T9.1-T9.3)","dependencies":[{"issue_id":"gno-n5m","depends_on_id":"gno-h7i","type":"blocks","created_at":"2025-12-23T14:53:27.49348+01:00","created_by":"daemon"}],"comments":[{"id":3,"issue_id":"gno-n5m","author":"gordon","text":"Spec: spec/cli.md §get/multi-get/ls. Schemas: spec/output-schemas/get.schema.json, multi-get.schema.json","created_at":"2025-12-23T15:14:57Z"}]}
{"id":"gno-n5m.1","title":"T9.1: Output formatters (cli/json/files/csv/md/xml)","description":"Implement all output formats. --json structured output, --files line protocol (#docid,score,uri), --csv, --md, --xml. Reference: docs/prd.md §15.1-§15.2.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-23T14:51:46.666231+01:00","updated_at":"2025-12-26T22:18:37.100852+01:00","closed_at":"2025-12-26T22:18:37.100852+01:00","close_reason":"Formatters implemented in src/cli/format/search-results.ts with json/files/csv/md/xml - used by search/vsearch","dependencies":[{"issue_id":"gno-n5m.1","depends_on_id":"gno-n5m","type":"parent-child","created_at":"2025-12-23T14:51:46.667016+01:00","created_by":"daemon"}]}
{"id":"gno-n5m.2","title":"T9.2: gno get and multi-get with limits and skipped records","description":"gno get \u003cref\u003e retrieves single doc by gno:// URI, collection/path, or #docid. Supports :line suffix, --from, -l, --line-numbers, --source. gno multi-get for multiple docs with --max-bytes limit. Reference: docs/prd.md §13.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-23T14:51:48.470556+01:00","updated_at":"2025-12-27T00:57:51.437165+01:00","closed_at":"2025-12-27T00:57:51.437165+01:00","close_reason":"Implemented in commit a7152f8","dependencies":[{"issue_id":"gno-n5m.2","depends_on_id":"gno-n5m","type":"parent-child","created_at":"2025-12-23T14:51:48.472081+01:00","created_by":"daemon"}]}
{"id":"gno-n5m.3","title":"T9.3: gno ls (collections and per-prefix listing)","description":"gno ls [collection|gno://collection/prefix] lists documents. Reference: docs/prd.md §14.2.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T14:51:50.11855+01:00","updated_at":"2025-12-27T00:57:51.444578+01:00","closed_at":"2025-12-27T00:57:51.444578+01:00","close_reason":"Implemented in commit a7152f8","dependencies":[{"issue_id":"gno-n5m.3","depends_on_id":"gno-n5m","type":"parent-child","created_at":"2025-12-23T14:51:50.119875+01:00","created_by":"daemon"}]}
{"id":"gno-nqu","title":"Enforce maxBytes limit before file read (stat-based)","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-24T08:59:59.567912+01:00","updated_at":"2025-12-27T11:22:27.857381+01:00","dependencies":[{"issue_id":"gno-nqu","depends_on_id":"gno-i7b","type":"parent-child","created_at":"2025-12-27T11:23:27.022194+01:00","created_by":"daemon"}],"comments":[{"id":9,"issue_id":"gno-nqu","author":"gordon","text":"During EPIC 4 planning, identified that maxBytes enforcement should happen before file bytes are loaded into memory. The converter receives bytes already loaded, so the size check is too late to prevent OOM.\n\nSolution: In EPIC 5 indexing pipeline, check file.size via stat BEFORE calling converter.convert(). If file exceeds maxBytes, skip conversion and record TOO_LARGE error without reading file bytes.\n\nThis keeps converter API clean (bytes already available) while preventing memory issues.","created_at":"2025-12-24T08:00:14Z"}]}
{"id":"gno-o0u","title":"vsearch N+1 query optimization","description":"Per-hit getChunks() + listDocuments() calls in vsearch.ts. Optimize with batch queries or extended SQL joins. Identified in T8 plan review.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T23:09:37.904787+01:00","updated_at":"2025-12-27T23:37:17.675891+01:00","closed_at":"2025-12-27T23:37:17.675891+01:00","close_reason":"N+1 optimization implemented with getChunksBatch()","dependencies":[{"issue_id":"gno-o0u","depends_on_id":"gno-h7i.1","type":"blocks","created_at":"2025-12-25T23:11:54.94752+01:00","created_by":"daemon"},{"issue_id":"gno-o0u","depends_on_id":"gno-h7i.2","type":"blocks","created_at":"2025-12-25T23:11:55.451136+01:00","created_by":"daemon"},{"issue_id":"gno-o0u","depends_on_id":"gno-h7i","type":"parent-child","created_at":"2025-12-27T11:23:10.576561+01:00","created_by":"daemon"}]}
{"id":"gno-ovm","title":"Reduce cognitive complexity in 11 functions (lint warnings)","description":"## Context\nBiome lint reports noExcessiveCognitiveComplexity warnings (max: 20) for these functions:\n\n| File | Function | Complexity |\n|------|----------|------------|\n| src/cli/commands/ask.ts:217 | ask() | 37 |\n| src/cli/commands/ask.ts:408 | formatTerminal() | 25 |\n| src/cli/commands/doctor.ts:146 | checkSqliteExtensions() | 28 |\n| src/cli/commands/query.ts:65 | query() | 25 |\n| src/ingestion/language.ts:153 | detectCjk() | 28 |\n| src/ingestion/sync.ts:188 | processFile() | 27 |\n| src/ingestion/sync.ts:412 | syncCollection() | 43 |\n| src/pipeline/fusion.ts:47 | rrfFuse() | 36 |\n| src/pipeline/hybrid.ts:182 | searchHybrid() | 83 |\n| src/pipeline/search.ts:117 | searchBm25() | 47 |\n| src/pipeline/vsearch.ts:47 | searchVectorWithEmbedding() | 58 |\n\n## Approach\nEach function needs to be split into smaller focused helpers. Common patterns:\n- Extract validation/setup logic\n- Extract result building logic\n- Extract error handling branches\n- Use early returns to reduce nesting\n\n## Priority\nP4 (backlog) - these are warnings not errors, code works correctly","status":"open","priority":4,"issue_type":"chore","created_at":"2025-12-27T23:39:05.526156+01:00","updated_at":"2025-12-27T23:39:05.526156+01:00"}
{"id":"gno-quw","title":"Distribution: Package manager support (Homebrew, Scoop, npm, etc.)","description":"Enable installation via common package managers across platforms.\n\n## Goal\nUsers can install gno via their preferred package manager instead of cloning/building.\n\n## Distribution Tiers (Fallback Strategy)\n**Tier A (Always possible)**: npm package requiring Bun runtime - `npm install -g gno` / `bunx gno`\n**Tier B (If bun compile works)**: Standalone binaries on GitHub Releases, then Homebrew/Scoop/winget\n\n## Key Challenges\n- Native deps (node-llama-cpp, sqlite-vec) may not work with standalone binaries\n- macOS needs Homebrew SQLite for vector search (documented requirement, not bundled)\n- macOS code signing/notarization ($99/yr Apple Developer account) - optional for direct downloads\n- Version sync: package.json is canonical, inject at build time\n\n## Platform Priority (with Gates)\n1. npm global install - always viable, requires Bun runtime\n2. GitHub Releases - depends on spike validating bun --compile\n3. Homebrew tap (macOS + Linux) - depends on GH Releases\n4. Scoop bucket (Windows) - GATED ON: Windows CI passing without continue-on-error\n5. winget (Windows) - after Scoop, more reach\n6. Chocolatey (optional) - enterprise Windows\n\n## Open Questions\n- Does bun build --compile bundle native binaries? (spike will answer)\n- Who owns Apple Developer account for signing? (defer until Homebrew works)\n\n## References\n- Bun executables: https://bun.sh/docs/bundler/executables\n- Homebrew taps: https://docs.brew.sh/How-to-Create-and-Maintain-a-Tap\n- Scoop manifests: https://github.com/ScoopInstaller/Scoop/wiki/App-Manifests","status":"open","priority":4,"issue_type":"epic","created_at":"2025-12-28T20:21:51.363629+01:00","updated_at":"2025-12-28T20:28:20.780659+01:00"}
{"id":"gno-quw.1","title":"Spike: Validate bun build --compile with native deps","description":"BLOCKING: Test if standalone binary actually works with native deps.\n\n## Steps\n1. Run: bun build --compile --minify src/index.ts --outfile gno-test\n2. Test on 'cold machine' conditions: no node_modules, no bun in PATH\n3. Run compiled binary: ./gno-test doctor --json\n4. Test vector search: ./gno-test search 'test query' (requires indexed data)\n5. Check if node-llama-cpp embedding works\n\n## Success Criteria (per dependency)\nFor each of sqlite-vec and node-llama-cpp, determine:\n- **Bundled**: Works inside compiled exe\n- **Sidecar**: Must ship .dylib/.so/.dll alongside binary\n- **Runtime download**: Must download at first run\n- **Unsupported**: Cannot work with bun --compile\n\n## Test Matrix\n- [ ] macOS arm64 (without Homebrew sqlite in test)\n- [ ] macOS x64\n- [ ] Linux x64\n- [ ] Windows x64\n\n## Output: Distribution Design Decision\nDocument for each native dep:\n1. Does it bundle into compiled binary?\n2. What filesystem layout is required?\n3. What runtime dependencies exist (Homebrew sqlite, etc)?\n\n## If spike fails\n- Fall back to Tier A: npm-only distribution (requires Bun runtime)\n- Document which deps failed and why\n- Research alternatives: sidecar binaries, runtime download, etc.\n\n## Files\n- src/store/vector/sqlite-vec.ts\n- src/store/sqlite/setup.ts\n- src/llm/nodeLlamaCpp/lifecycle.ts\n- src/cli/commands/doctor.ts","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-28T20:22:13.125574+01:00","updated_at":"2025-12-28T20:28:38.370303+01:00","dependencies":[{"issue_id":"gno-quw.1","depends_on_id":"gno-quw","type":"parent-child","created_at":"2025-12-28T20:22:13.129934+01:00","created_by":"daemon"}]}
{"id":"gno-quw.10","title":"Automate Homebrew/Scoop manifest updates on release","description":"Auto-update package manager manifests when new releases ship.\n\n## Problem\nManual multi-repo updates don't scale. Every release requires updating:\n- homebrew-gno/Formula/gno.rb (version + SHA256)\n- scoop-gno/bucket/gno.json (version + hash)\n\n## Solution Options\n\n### Option A: GitHub Action in gno repo\nOn release publish event:\n1. Calculate SHA256 of release assets\n2. Open PR to homebrew-gno with updated formula\n3. Open PR to scoop-gno with updated manifest\n\n### Option B: Native tooling\n- Homebrew: Use `brew bump-formula-pr` in CI\n- Scoop: Use checkver + autoupdate built into manifest format\n\n### Recommendation\nOption B - use native tooling. Less custom code to maintain.\n\n## Implementation\n1. In homebrew-gno: use GitHub Action that runs `brew bump-formula-pr` on release\n2. In scoop-gno: configure checkver + autoupdate in manifest, run `scoop update` check\n\n## Dependencies\nMust complete after gno-quw.5 (Homebrew) and gno-quw.6 (Scoop) are set up.\n\n## Files\n- homebrew-gno/.github/workflows/update.yml (new)\n- scoop-gno/.github/workflows/update.yml (new)","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-28T20:29:47.142379+01:00","updated_at":"2025-12-28T20:29:47.142379+01:00","dependencies":[{"issue_id":"gno-quw.10","depends_on_id":"gno-quw","type":"parent-child","created_at":"2025-12-28T20:29:47.153643+01:00","created_by":"daemon"},{"issue_id":"gno-quw.10","depends_on_id":"gno-quw.5","type":"blocks","created_at":"2025-12-28T20:29:54.671218+01:00","created_by":"daemon"},{"issue_id":"gno-quw.10","depends_on_id":"gno-quw.6","type":"blocks","created_at":"2025-12-28T20:29:54.840985+01:00","created_by":"daemon"}]}
{"id":"gno-quw.11","title":"Gate Windows distribution on CI stability","description":"Windows package managers (Scoop, winget) require stable Windows artifacts.\n\n## Current State\nCI has continue-on-error for Windows tests, indicating known failures.\n\n## Gate Criteria\nBefore publishing Windows installers:\n1. Remove continue-on-error from Windows CI jobs\n2. All core tests pass on Windows (doctor, search, index)\n3. Smoke test: gno doctor --json passes on Windows CI\n\n## Acceptance\n- CI blocks on Windows test failures\n- No 'known failures' in Windows notes\n- Windows binary produces valid doctor output\n\n## Why This Matters\nPublishing broken Windows installers creates:\n- Support debt (user issues)\n- Reputation damage\n- Permanent broken versions in package managers\n\n## Dependencies\nThis task BLOCKS gno-quw.6 (Scoop) and gno-quw.8 (winget).\n\n## Files\n- .github/workflows/ci.yml (remove continue-on-error)","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-28T20:30:08.504847+01:00","updated_at":"2025-12-28T20:30:08.504847+01:00","dependencies":[{"issue_id":"gno-quw.11","depends_on_id":"gno-quw","type":"parent-child","created_at":"2025-12-28T20:30:08.514937+01:00","created_by":"daemon"}]}
{"id":"gno-quw.2","title":"Fix version management: sync package.json and constants.ts","description":"Make package.json version the single source of truth.\n\n## Decision\npackage.json `version` is canonical. All other version references derive from it.\n\n## Implementation\n1. Add `version: \"0.1.0\"` to package.json\n2. Update build script: `bun build --define VERSION='\"x.y.z\"'` (compiled releases)\n3. In constants.ts: read from package.json in dev, use injected VERSION in compiled binary\n4. Add `bun run version:bump` script using `npm version patch|minor|major`\n5. Document: git tag vX.Y.Z MUST match package.json version\n\n## Tagging Policy\n- Tags: `vX.Y.Z` format (e.g., v0.2.0)\n- Tag triggers release workflow\n- Tag version must match package.json version (validated in CI)\n\n## Dev vs Compiled\n- Dev mode: import { version } from '../package.json'\n- Compiled binary: VERSION injected via --define\n\n## Files\n- package.json (add version field)\n- src/app/constants.ts:22 (derive from package.json or injected)","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-28T20:22:14.211691+01:00","updated_at":"2025-12-28T20:28:50.532716+01:00","dependencies":[{"issue_id":"gno-quw.2","depends_on_id":"gno-quw","type":"parent-child","created_at":"2025-12-28T20:22:14.2175+01:00","created_by":"daemon"}]}
{"id":"gno-quw.3","title":"GitHub Actions release workflow","description":"Create workflow that builds and publishes binaries on tag push.\n\n## Trigger\nPush tag matching v* (e.g., v0.1.0)\n\n## Version Validation (first step)\n- Extract version from tag (strip 'v' prefix)\n- Compare to package.json version\n- FAIL if mismatch\n\n## Matrix\n- darwin-arm64 (Apple Silicon)\n- darwin-x64 (Intel Mac)\n- linux-x64\n- linux-arm64\n- windows-x64\n\n## Steps per platform\n1. Checkout + setup-bun\n2. bun install\n3. bun build --compile --minify --target=$TARGET --define VERSION='\"$VERSION\"'\n4. Set executable permissions (Unix)\n5. Generate SHA256 checksum (portable: use openssl dgst -sha256 or shasum -a 256)\n6. Upload to GitHub Release\n\n## Asset Naming\n- gno-darwin-arm64.tar.gz (compressed)\n- gno-darwin-x64.tar.gz\n- gno-linux-x64.tar.gz\n- gno-linux-arm64.tar.gz\n- gno-windows-x64.zip\n- checksums.txt (consolidated SHA256 for all assets)\n\n## Compression\n- Unix: tar.gz (preserves permissions)\n- Windows: zip\n\n## Release Validation\n- Run doctor --json from compiled binary in CI\n- Schema-validate output before publishing\n\n## Files\n- .github/workflows/release.yml (new)\n- .github/workflows/ci.yml (reference)","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-28T20:22:15.421056+01:00","updated_at":"2025-12-28T20:29:04.981773+01:00","dependencies":[{"issue_id":"gno-quw.3","depends_on_id":"gno-quw","type":"parent-child","created_at":"2025-12-28T20:22:15.428922+01:00","created_by":"daemon"},{"issue_id":"gno-quw.3","depends_on_id":"gno-quw.1","type":"blocks","created_at":"2025-12-28T20:23:10.396188+01:00","created_by":"daemon"},{"issue_id":"gno-quw.3","depends_on_id":"gno-quw.2","type":"blocks","created_at":"2025-12-28T20:23:10.564447+01:00","created_by":"daemon"}]}
{"id":"gno-quw.4","title":"npm publishing setup","description":"Enable npm install -g gno and bunx gno.\n\n## package.json changes\n- Add version: \"0.1.0\" (sync with constants.ts)\n- Add files: ['src', 'README.md', 'LICENSE']\n- Add engines: { bun: '\u003e=1.0.0' }\n- Add publishConfig: { access: 'public' }\n- Fix duplicate author/Author fields\n\n## Bin Entry\nEnsure bin/gno or src/index.ts has:\n- `#!/usr/bin/env bun` shebang\n- Executable permission (chmod +x)\n\n## Postinstall Check\nAdd postinstall script that:\n- Checks if bun is available\n- Errors with clear message if not: 'gno requires Bun runtime. Install from https://bun.sh'\n\n## Native Deps Warning\nDocument that native deps (node-llama-cpp, sqlite-vec) may require:\n- Supported platform (macOS/Linux/Windows x64)\n- Build tools if prebuilds unavailable\n\n## Verification\n- npm pack --dry-run (check included files)\n- npm publish --dry-run\n- Test: npm install -g ./gno-0.1.0.tgz \u0026\u0026 gno --version\n\n## Files\n- package.json\n- src/index.ts (verify shebang)\n- scripts/postinstall.ts (new, optional)","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-28T20:22:38.996192+01:00","updated_at":"2025-12-28T20:29:18.472119+01:00","dependencies":[{"issue_id":"gno-quw.4","depends_on_id":"gno-quw","type":"parent-child","created_at":"2025-12-28T20:22:39.000009+01:00","created_by":"daemon"}]}
{"id":"gno-quw.5","title":"Homebrew tap repository + formula","description":"Create homebrew-gno repo with formula for macOS + Linux.\n\n## Setup\n1. Create repo: steveyegge/homebrew-gno (or org name)\n2. Create Formula/gno.rb\n\n## Formula structure\n- on_macos/on_linux blocks with arch detection\n- Download from GitHub Releases\n- SHA256 checksums (auto-updated)\n- Install binary to bin/\n- Test block: gno --version\n\n## Dependencies\n- depends_on 'sqlite' (for vector search on macOS)\n\n## Usage\nbrew tap steveyegge/gno\nbrew install gno\n\n## Automation\nConsider brew bump-formula-pr or GitHub Action to auto-update on release.\n\n## Files\n- New repo: homebrew-gno/Formula/gno.rb","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-28T20:22:42.640996+01:00","updated_at":"2025-12-28T20:22:42.640996+01:00","dependencies":[{"issue_id":"gno-quw.5","depends_on_id":"gno-quw","type":"parent-child","created_at":"2025-12-28T20:22:42.648581+01:00","created_by":"daemon"},{"issue_id":"gno-quw.5","depends_on_id":"gno-quw.3","type":"blocks","created_at":"2025-12-28T20:23:10.729958+01:00","created_by":"daemon"}]}
{"id":"gno-quw.6","title":"Scoop bucket + manifest","description":"Create scoop-gno repo with manifest for Windows.\n\n## Setup\n1. Create repo: steveyegge/scoop-gno\n2. Create bucket/gno.json manifest\n\n## Manifest\n- 64bit architecture block\n- Download from GitHub Releases\n- SHA256 hash\n- checkver: github (auto-detect new versions)\n- autoupdate block\n\n## Usage\nscoop bucket add gno https://github.com/steveyegge/scoop-gno\nscoop install gno\n\n## Files\n- New repo: scoop-gno/bucket/gno.json","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-28T20:22:43.888568+01:00","updated_at":"2025-12-28T20:22:43.888568+01:00","dependencies":[{"issue_id":"gno-quw.6","depends_on_id":"gno-quw","type":"parent-child","created_at":"2025-12-28T20:22:43.893637+01:00","created_by":"daemon"},{"issue_id":"gno-quw.6","depends_on_id":"gno-quw.3","type":"blocks","created_at":"2025-12-28T20:23:10.897156+01:00","created_by":"daemon"},{"issue_id":"gno-quw.6","depends_on_id":"gno-quw.11","type":"blocks","created_at":"2025-12-28T20:30:16.689851+01:00","created_by":"daemon"}]}
{"id":"gno-quw.7","title":"macOS code signing + notarization","description":"Sign and notarize macOS binaries to avoid Gatekeeper warnings.\n\n## Requirements\n- Apple Developer account ($99/yr)\n- Developer ID certificate\n- App-specific password for notarytool\n\n## Steps\n1. codesign --force --sign 'Developer ID' ./gno-darwin-*\n2. Create zip: ditto -c -k --keepParent gno gno.zip\n3. notarytool submit gno.zip --apple-id ... --team-id ...\n4. Staple (if using DMG/PKG, not bare binary)\n\n## CI Integration\n- Store credentials as GitHub secrets\n- Add signing step to release workflow\n\n## Alternative\nSkip if distributing via Homebrew (unsigned binaries work with brew).\n\n## Priority\nP4 (backlog) - only needed for direct binary downloads.\n\n## References\nhttps://developer.apple.com/documentation/security/notarizing_macos_software_before_distribution","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-28T20:22:45.606896+01:00","updated_at":"2025-12-28T20:22:45.606896+01:00","dependencies":[{"issue_id":"gno-quw.7","depends_on_id":"gno-quw","type":"parent-child","created_at":"2025-12-28T20:22:45.611722+01:00","created_by":"daemon"},{"issue_id":"gno-quw.7","depends_on_id":"gno-quw.3","type":"blocks","created_at":"2025-12-28T20:23:11.064104+01:00","created_by":"daemon"}]}
{"id":"gno-quw.8","title":"winget manifest submission","description":"Submit to Microsoft winget-pkgs for broader Windows reach.\n\n## Manifest structure\nmanifests/s/steveyegge/gno/x.y.z/\n├── steveyegge.gno.yaml\n├── steveyegge.gno.locale.en-US.yaml\n└── steveyegge.gno.installer.yaml\n\n## Process\n1. Fork microsoft/winget-pkgs\n2. Create manifest files\n3. Run winget validate\n4. Submit PR\n\n## Alternative\nUse wingetcreate tool for assisted manifest generation.\n\n## Priority\nP4 - Scoop is easier and targets same audience. Do this after Scoop is working.\n\n## References\nhttps://learn.microsoft.com/en-us/windows/package-manager/package/manifest","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-28T20:22:59.976825+01:00","updated_at":"2025-12-28T20:22:59.976825+01:00","dependencies":[{"issue_id":"gno-quw.8","depends_on_id":"gno-quw","type":"parent-child","created_at":"2025-12-28T20:22:59.982513+01:00","created_by":"daemon"},{"issue_id":"gno-quw.8","depends_on_id":"gno-quw.6","type":"blocks","created_at":"2025-12-28T20:23:11.232455+01:00","created_by":"daemon"},{"issue_id":"gno-quw.8","depends_on_id":"gno-quw.11","type":"blocks","created_at":"2025-12-28T20:30:16.860378+01:00","created_by":"daemon"}]}
{"id":"gno-quw.9","title":"Install script (curl | sh)","description":"Provide one-liner install for users without package managers.\n\n## Script behavior\n1. Detect OS + arch\n2. Download correct binary from GitHub Releases (latest tag by default)\n3. Download checksums.txt from same release\n4. Verify SHA256 against checksums.txt\n5. Install to ~/.local/bin (default, no PATH modification)\n6. Print instructions for adding to PATH if needed\n\n## Security Requirements\n- HTTPS only, no redirect following to different domains\n- Verify checksum BEFORE any execution\n- No silent PATH modification (print instructions instead)\n- Support --version flag to install specific version (default: latest)\n\n## Usage\ncurl -fsSL https://raw.githubusercontent.com/steveyegge/gno/main/install.sh | sh\ncurl -fsSL ... | sh -s -- --version v0.2.0\n\n## Error Cases\n- Unknown OS/arch: print supported platforms and exit\n- Checksum mismatch: error with clear message\n- Download failure: error with retry suggestion\n\n## Files\n- install.sh (new, at repo root)\n- install.ps1 (optional, for Windows PowerShell)\n\n## Priority\nP4 - Nice to have after package managers work.","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-28T20:23:01.412958+01:00","updated_at":"2025-12-28T20:29:32.097601+01:00","dependencies":[{"issue_id":"gno-quw.9","depends_on_id":"gno-quw","type":"parent-child","created_at":"2025-12-28T20:23:01.416956+01:00","created_by":"daemon"},{"issue_id":"gno-quw.9","depends_on_id":"gno-quw.3","type":"blocks","created_at":"2025-12-28T20:23:11.399084+01:00","created_by":"daemon"}]}
{"id":"gno-u7y","title":"EPIC 11: Evals and regression gates (Evalite v1)","description":"Implement eval harness using Evalite v1 for ranking quality gates, expansion stability, and multilingual validation.\n\n**Key Deliverables:**\n- Custom IR scorers (recallAtK, ndcgAtK)\n- Multilingual test corpus (DE/EN/FR/IT)\n- CI integration with threshold gating\n- Static UI export for artifacts\n\n**Evalite v1 Features Used:**\n- `evalite()` function in `.eval.ts` files\n- `createScorer()` for custom IR metrics\n- `defineConfig()` with SQLite storage\n- `trialCount` for variance measurement\n- `columns` for debugging output\n- CLI: `evalite watch`, `evalite export`\n\n**Docs:** spec/evals.md, PRD \\u00a718.2\n\n**Acceptance (EPIC):**\n- T11.1: 20+ queries, 8+ docs across 4 languages\n- T11.2: All eval files pass with custom scorers\n- T11.3: CI workflow with threshold=70%","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-23T14:51:05.361696+01:00","updated_at":"2025-12-25T11:18:42.73003+01:00","dependencies":[{"issue_id":"gno-u7y","depends_on_id":"gno-h7i","type":"blocks","created_at":"2025-12-23T14:53:29.42107+01:00","created_by":"daemon"}],"comments":[{"id":8,"issue_id":"gno-u7y","author":"gordon","text":"Spec: docs/prd.md §18.2 (Evals). Future: spec/evals.md. Evalite v1 for ranking quality gates.","created_at":"2025-12-23T15:15:18Z"},{"id":15,"issue_id":"gno-u7y","author":"gordon","text":"Spec now exists: spec/evals.md - complete Evalite v1 implementation guide with custom scorers, eval files, CI workflow.","created_at":"2025-12-25T10:20:26Z"}]}
{"id":"gno-u7y.1","title":"T11.1: Curate eval corpus, queries, judgments","description":"Create test corpus with DE/EN/FR/IT docs. Define queries and relevance judgments. Include cross-language queries.\n\n**File Structure:**\n```\ntest/eval/fixtures/\n  corpus/\n    de/   # German test docs (min 2)\n    en/   # English test docs (min 2)\n    fr/   # French test docs (min 2)\n    it/   # Italian test docs (min 2)\n  queries.json  # Query-judgment pairs\n```\n\n**queries.json Format:**\n```json\n{\n  \"id\": \"q1\",\n  \"query\": \"termination clause\",\n  \"collection\": \"contracts\",\n  \"language\": \"en\",\n  \"relevantDocs\": [\"#a1b2c3\"],\n  \"judgments\": [\n    { \"docid\": \"#a1b2c3\", \"relevance\": 3 }\n  ]\n}\n```\n\n**Acceptance:**\n- [ ] 20+ queries with relevance judgments\n- [ ] 2+ docs each in DE, EN, FR, IT\n- [ ] 3+ cross-language query-doc pairs\n- [ ] Relevance grades 0-3 (0=not relevant, 3=perfect match)\n\nReference: spec/evals.md, PRD \\u00a718.2","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-23T14:51:57.703685+01:00","updated_at":"2025-12-25T11:17:58.293746+01:00","dependencies":[{"issue_id":"gno-u7y.1","depends_on_id":"gno-u7y","type":"parent-child","created_at":"2025-12-23T14:51:57.704761+01:00","created_by":"daemon"}],"comments":[{"id":16,"issue_id":"gno-u7y.1","author":"gordon","text":"Impl spec: spec/evals.md §Test Data Format","created_at":"2025-12-25T10:20:28Z"}]}
{"id":"gno-u7y.2","title":"T11.2: Implement eval harness and metrics","description":"Implement eval harness using Evalite v1 with custom IR scorers.\n\n**Files to Create:**\n```\ntest/eval/\n  scorers/\n    ir-metrics.ts       # recallAtK, ndcgAtK\n    expansion-validity.ts\n  vsearch.eval.ts       # Vector search ranking\n  query.eval.ts         # Hybrid query pipeline\n  expansion.eval.ts     # Structured expansion stability\n  multilingual.eval.ts  # Cross-language ranking\nevalite.config.ts       # Global config\n```\n\n**Custom Scorers (ir-metrics.ts):**\n- `recallAtK(k)`: Fraction of relevant docs in top k\n- `ndcgAtK(k)`: Normalized DCG at rank k\n- `latencyBudget(maxMs)`: Soft latency gate\n\n**Config (evalite.config.ts):**\n```ts\nimport { defineConfig } from 'evalite/config';\nimport { createSqliteStorage } from 'evalite/sqlite-storage';\n\nexport default defineConfig({\n  storage: () =\u003e createSqliteStorage('./evalite.db'),\n  testTimeout: 120000,\n  maxConcurrency: 10,\n  scoreThreshold: 70,\n  cache: true,\n});\n```\n\n**Acceptance:**\n- [ ] recallAtK(5), recallAtK(10), ndcgAtK(10) scorers work\n- [ ] vsearch.eval.ts passes with fixture corpus\n- [ ] query.eval.ts passes with latency tracking\n- [ ] expansion.eval.ts validates schema + runs trialCount=3\n- [ ] multilingual.eval.ts tests cross-language retrieval\n- [ ] `bun run evalite watch` shows UI at localhost:3006\n\nReference: spec/evals.md, PRD \\u00a718.2","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-23T14:51:59.211375+01:00","updated_at":"2025-12-25T11:18:13.624813+01:00","dependencies":[{"issue_id":"gno-u7y.2","depends_on_id":"gno-u7y","type":"parent-child","created_at":"2025-12-23T14:51:59.212651+01:00","created_by":"daemon"}],"comments":[{"id":17,"issue_id":"gno-u7y.2","author":"gordon","text":"Impl spec: spec/evals.md §Custom Scorers, §Eval Files","created_at":"2025-12-25T10:20:30Z"}]}
{"id":"gno-u7y.3","title":"T11.3: CI gating (soft fail then hard fail)","description":"Integrate evals in CI. Start with soft fail, move to hard fail after baseline established.\n\n**GitHub Actions Workflow (.github/workflows/evals.yml):**\n```yaml\nname: Evals\non:\n  push:\n    branches: [main]\n  pull_request:\n    paths:\n      - 'src/pipeline/**'\n      - 'src/llm/**'\n      - 'test/eval/**'\n\njobs:\n  evals:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - uses: oven-sh/setup-bun@v2\n      - run: bun install\n      - run: bun run eval:ci\n      - run: bun run evalite export --output=./eval-ui\n        if: always()\n      - uses: actions/upload-artifact@v4\n        with:\n          name: eval-results\n          path: |\n            eval-results.json\n            eval-ui/\n```\n\n**package.json Scripts:**\n```json\n{\n  \"eval\": \"evalite\",\n  \"eval:watch\": \"evalite watch\",\n  \"eval:ci\": \"evalite --threshold=70 --outputPath=./eval-results.json\"\n}\n```\n\n**Threshold Progression:**\n| Phase | Threshold | Rationale |\n|-------|-----------|-----------|\n| MVP   | 70%       | Baseline  |\n| Beta  | 80%       | Stabilize |\n| GA    | 90%       | Production|\n\n**Acceptance:**\n- [ ] Workflow triggers on relevant path changes\n- [ ] `--threshold=70` fails CI if score drops\n- [ ] Static UI exported as artifact\n- [ ] JSON results exported for analysis\n- [ ] Soft fail (|| true) initially, hard fail after baseline\n\nReference: spec/evals.md, PRD \\u00a718.2","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-23T14:52:00.428947+01:00","updated_at":"2025-12-25T11:18:29.484627+01:00","dependencies":[{"issue_id":"gno-u7y.3","depends_on_id":"gno-u7y","type":"parent-child","created_at":"2025-12-23T14:52:00.43021+01:00","created_by":"daemon"}],"comments":[{"id":18,"issue_id":"gno-u7y.3","author":"gordon","text":"Impl spec: spec/evals.md §CI Integration","created_at":"2025-12-25T10:20:32Z"}]}
{"id":"gno-ub9","title":"EPIC 13: Raycast extension (macOS GUI layer)","status":"open","priority":4,"issue_type":"epic","created_at":"2025-12-24T09:11:03.661815+01:00","updated_at":"2025-12-27T11:15:54.903339+01:00","dependencies":[{"issue_id":"gno-ub9","depends_on_id":"gno-mu3","type":"blocks","created_at":"2025-12-24T09:12:05.657529+01:00","created_by":"daemon"},{"issue_id":"gno-ub9","depends_on_id":"gno-i7b","type":"blocks","created_at":"2025-12-24T09:12:06.101249+01:00","created_by":"daemon"},{"issue_id":"gno-ub9","depends_on_id":"gno-v8w","type":"blocks","created_at":"2025-12-24T09:12:06.557759+01:00","created_by":"daemon"},{"issue_id":"gno-ub9","depends_on_id":"gno-ia1","type":"blocks","created_at":"2025-12-24T09:12:07.040682+01:00","created_by":"daemon"},{"issue_id":"gno-ub9","depends_on_id":"gno-h7i","type":"blocks","created_at":"2025-12-24T09:12:07.514862+01:00","created_by":"daemon"},{"issue_id":"gno-ub9","depends_on_id":"gno-n5m","type":"blocks","created_at":"2025-12-24T09:12:07.974467+01:00","created_by":"daemon"},{"issue_id":"gno-ub9","depends_on_id":"gno-3qp","type":"blocks","created_at":"2025-12-24T09:12:08.417556+01:00","created_by":"daemon"},{"issue_id":"gno-ub9","depends_on_id":"gno-zp2","type":"blocks","created_at":"2025-12-24T09:12:08.859343+01:00","created_by":"daemon"}],"comments":[{"id":10,"issue_id":"gno-ub9","author":"gordon","text":"## Summary\n\nA native macOS Raycast extension providing GUI access to GNO's core capabilities: search, semantic query, ask, and quick capture. Raycast is ideal because it's keyboard-driven, React/TypeScript-based (same stack as GNO), and deeply integrated into macOS workflows.\n\n## Why Raycast\n\n1. **Same tech stack** - React + TypeScript + Node, minimal context switch\n2. **Keyboard-first** - matches CLI power-user mindset\n3. **Native performance** - no Electron overhead, instant access via hotkey\n4. **Rich UI primitives** - List, Detail, Form, Grid, Actions, Menu Bar\n5. **AI integration** - built-in hooks for AI features (useAI)\n6. **Large ecosystem** - 5000+ extensions, proven patterns to follow\n\n## Core Commands\n\n### 1. Search Notes (gno search)\n- Component: List with search bar\n- Features: Instant FTS search, tag filtering, collection scoping\n- Actions: Open in editor, Quick Look preview, copy content/path\n\n### 2. Semantic Search (gno vsearch)\n- Component: List with search bar\n- Features: Vector similarity, hybrid mode toggle, relevance scores\n\n### 3. Ask Question (gno ask)\n- Component: Form then Detail\n- Flow: Question input then streaming answer with citations\n- Features: Citation links, copy answer, regenerate, view context\n\n### 4. Quick Capture\n- Component: Form with title, content, collection, tags\n\n### 5. Browse Collections\n- Component: List chain (Collections, Documents, Detail)\n- Features: Collection stats, document metadata, trigger re-index\n\n### 6. Status Dashboard (Menu Bar)\n- Features: Index health, last sync, quick actions, model status\n\n## Technical Architecture\n\nIntegration via CLI wrapper (spawn gno commands, parse JSON).\nLater: direct library import or MCP client.\n\n## Implementation Tasks\n\n1. T13.1: Raycast extension scaffold\n2. T13.2: GNO CLI wrapper with JSON parsing\n3. T13.3: Search command (FTS)\n4. T13.4: Semantic search command\n5. T13.5: Ask command with streaming\n6. T13.6: Quick capture form\n7. T13.7: Browse collections\n8. T13.8: Menu bar status\n9. T13.9: Raycast Store submission\n\n## Resources\n\n- Raycast Developer Docs: https://developers.raycast.com\n- Extensions Repo: https://github.com/raycast/extensions\n- Obsidian Extension (reference): https://www.raycast.com/marcjulian/obsidian\n","created_at":"2025-12-24T08:11:51Z"}]}
{"id":"gno-v8w","title":"EPIC 6: LLM subsystem (node-llama-cpp) and model UX","status":"closed","priority":0,"issue_type":"epic","created_at":"2025-12-23T14:51:56.617805+01:00","updated_at":"2025-12-24T20:40:10.519946+01:00","closed_at":"2025-12-24T20:40:10.519946+01:00","close_reason":"Implemented in PR #4","dependencies":[{"issue_id":"gno-v8w","depends_on_id":"gno-8db","type":"blocks","created_at":"2025-12-23T14:53:23.272526+01:00","created_by":"daemon"}],"comments":[{"id":7,"issue_id":"gno-v8w","author":"gordon","text":"Spec: docs/prd.md §11 (Local inference). Future: spec/models.md. gno models commands in spec/cli.md.","created_at":"2025-12-23T15:15:16Z"}]}
{"id":"gno-v8w.1","title":"T6.1: LLM adapter lifecycle management","description":"node-llama-cpp adapter for embeddings, generation, reranking. Keep models loaded for repeated calls. Dispose contexts/sequences promptly. Safe memory management for long MCP sessions. Reference: docs/prd.md §11.1.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-23T14:52:03.633511+01:00","updated_at":"2025-12-24T20:40:10.521868+01:00","closed_at":"2025-12-24T20:40:10.521868+01:00","close_reason":"Implemented in PR #4","dependencies":[{"issue_id":"gno-v8w.1","depends_on_id":"gno-v8w","type":"parent-child","created_at":"2025-12-23T14:52:03.634686+01:00","created_by":"daemon"}]}
{"id":"gno-v8w.2","title":"T6.2: Model presets and config overrides","description":"Config-driven presets. Preset A (multilingual, default): bge-m3 embed, bge-reranker-v2-m3, Qwen Instruct gen. Preset B (Qwen): Qwen3 family. Reference: docs/prd.md §11.4.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-23T14:52:12.253799+01:00","updated_at":"2025-12-24T20:40:10.52346+01:00","closed_at":"2025-12-24T20:40:10.52346+01:00","close_reason":"Implemented in PR #4","dependencies":[{"issue_id":"gno-v8w.2","depends_on_id":"gno-v8w","type":"parent-child","created_at":"2025-12-23T14:52:12.254488+01:00","created_by":"daemon"}]}
{"id":"gno-v8w.3","title":"T6.3: Model cache resolver (hf: URIs) and gno models commands","description":"Cache at \u003ccacheDir\u003e/models. Commands: gno models list|pull|clear|path. Auto-resolve GGUF from HuggingFace URIs. Reference: docs/prd.md §11.3.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-23T14:52:21.802409+01:00","updated_at":"2025-12-24T20:40:10.52482+01:00","closed_at":"2025-12-24T20:40:10.52482+01:00","close_reason":"Implemented in PR #4","dependencies":[{"issue_id":"gno-v8w.3","depends_on_id":"gno-v8w","type":"parent-child","created_at":"2025-12-23T14:52:21.802754+01:00","created_by":"daemon"}]}
{"id":"gno-v8w.4","title":"T6.4: gno doctor checks (models, vec, conversion readiness)","description":"Validate model URIs resolvable, models cached or downloadable, embedding/rerank dims match, sqlite-vec available, converters ready. Actionable diagnostics. Reference: docs/prd.md §11.4 and §19.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T14:52:28.38997+01:00","updated_at":"2025-12-24T20:40:10.526042+01:00","closed_at":"2025-12-24T20:40:10.526042+01:00","close_reason":"Implemented in PR #4","dependencies":[{"issue_id":"gno-v8w.4","depends_on_id":"gno-v8w","type":"parent-child","created_at":"2025-12-23T14:52:28.390834+01:00","created_by":"daemon"}]}
{"id":"gno-x6h","title":"BM25 source metadata consistency","description":"## Problem\n\nBM25 search hardcodes `mime: 'text/markdown', ext: '.md'` in `search.ts:67-71`. Missing `modifiedAt`, `sizeBytes`, `sourceHash` from output. Hybrid search (`hybrid.ts:457-466`) returns full metadata correctly.\n\n## Approach\n\n1. Extend FTS query to SELECT source columns from documents table:\n   - `d.source_mime`, `d.source_ext`, `d.source_mtime`, `d.source_size`, `d.source_hash`\n2. Extend FtsResult type with **optional** fields (keeps backward compat, avoids test fixture churn):\n   - `sourceMime?: string`, `sourceExt?: string`, `sourceMtime?: string`, `sourceSize?: number`, `sourceHash?: string`\n3. Use actual values in buildSearchResult() with fallback to existing hardcodes\n\n## Key Context\n\n- Schema requires: `search-result.schema.json:80-93` defines optional source fields\n- Correct example: `hybrid.ts:457-466` shows all fields populated\n- FtsResult type: `types.ts:205-216` needs extending (optional fields)\n- Note: source_mtime is stored as ISO 8601 string, matches schema `format: date-time`\n\n## Dependency\n\nDepends on c2t landing first (or together) - the window function approach in c2t ensures source metadata corresponds to the returned doc's URI.\n\n## Files to Modify\n\n1. `src/store/sqlite/adapter.ts` - Add d.source_* to SELECT clause\n2. `src/store/types.ts` - Extend FtsResult with optional source fields\n3. `src/pipeline/search.ts:67-71` - Use fts.source* values with fallbacks\n\n## Acceptance Checks\n\n- [ ] BM25 results include modifiedAt, sizeBytes, sourceHash (when present)\n- [ ] mime/ext match actual source file, not hardcoded markdown\n- [ ] Schema validation passes for BM25 output\n- [ ] Consistency with hybrid search output format\n- [ ] Existing tests pass (optional fields don't break mocks)","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-25T23:09:39.411634+01:00","updated_at":"2025-12-28T12:31:57.385618+01:00","closed_at":"2025-12-28T12:31:57.385618+01:00","close_reason":"Closed","dependencies":[{"issue_id":"gno-x6h","depends_on_id":"gno-h7i.1","type":"blocks","created_at":"2025-12-25T23:11:55.93592+01:00","created_by":"daemon"},{"issue_id":"gno-x6h","depends_on_id":"gno-h7i","type":"parent-child","created_at":"2025-12-27T11:23:13.828553+01:00","created_by":"daemon"},{"issue_id":"gno-x6h","depends_on_id":"gno-c2t","type":"blocks","created_at":"2025-12-28T11:51:56.674415+01:00","created_by":"daemon"}]}
{"id":"gno-zp2","title":"EPIC 12: Packaging, release, docs","description":"# EPIC 12: World-Class Documentation\n\nCreate comprehensive, world-class markdown documentation for GNO that rivals or exceeds competitors like QMD.\n\n## Vision\nDocumentation that enables:\n- 5-minute quickstart for new users\n- Deep architectural understanding for contributors\n- Seamless agentic integration (Claude Code, MCP)\n- Cross-project knowledge search use cases\n\n## Documentation Suite\nAll docs in `docs/` as markdown, designed for future Jekyll/static site generation.\n\n### Core Documents\n1. **README.md** - Landing page, value prop, quick overview\n2. **QUICKSTART.md** - init → index → search in 3 commands\n3. **INSTALLATION.md** - All methods (bun, npm, Homebrew), requirements\n4. **ARCHITECTURE.md** - Hybrid search pipeline, ASCII diagrams, score fusion\n5. **CLI.md** - Complete command reference with examples\n6. **MCP.md** - Claude Code/Desktop integration, tool reference\n7. **USE-CASES.md** - Real scenarios (Obsidian vault, cross-project search, agentic flows)\n8. **CONFIGURATION.md** - Collections, contexts, models, presets\n9. **TROUBLESHOOTING.md** - Common issues, native deps, model downloads\n\n## Quality Bar\n- ASCII architecture diagrams (like QMD)\n- Copy-pasteable code examples\n- Score interpretation tables\n- Comparison to alternatives (local-first, privacy)\n- Agentic workflow examples (Claude Code searching Obsidian from any project)\n\n## Prerequisite\nPhase 0: Deep codebase review to understand specs, pipeline, types, and current behavior.\n\n## Future\nMarkdown docs will feed into Jekyll/HTML doc site later.","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-23T14:51:06.512616+01:00","updated_at":"2025-12-29T01:30:28.58272+01:00","dependencies":[{"issue_id":"gno-zp2","depends_on_id":"gno-3qp","type":"blocks","created_at":"2025-12-23T14:53:30.051144+01:00","created_by":"daemon"}]}
{"id":"gno-zp2.1","title":"T12.1: npm packaging and install docs","description":"npm package with bin entry for gno. Bun-first. Document native dep handling. Reference: docs/prd.md §19.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-23T14:52:01.653311+01:00","updated_at":"2025-12-29T01:30:35.160395+01:00","closed_at":"2025-12-29T01:30:35.160395+01:00","close_reason":"Replaced with comprehensive docs plan","dependencies":[{"issue_id":"gno-zp2.1","depends_on_id":"gno-zp2","type":"parent-child","created_at":"2025-12-23T14:52:01.654578+01:00","created_by":"daemon"}]}
{"id":"gno-zp2.10","title":"D5: CLI.md - Complete command reference","description":"Full CLI documentation with all commands and options.\n\n## Format per Command\n- Synopsis\n- Description\n- Options table (flag, type, default, description)\n- Examples (multiple)\n- Output format\n- Exit codes\n\n## Commands to Document\n- gno init\n- gno collection (add, list, remove, rename)\n- gno context (add, list, rm)\n- gno search / vsearch / query\n- gno get / multi-get\n- gno ask\n- gno embed\n- gno update\n- gno status\n- gno doctor\n- gno models (list, pull, remove)\n- gno cleanup / reset\n\n## Output Formats\nDocument: --json, --files, --csv, --md, --xml","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-29T01:32:39.037763+01:00","updated_at":"2025-12-29T01:32:39.037763+01:00","dependencies":[{"issue_id":"gno-zp2.10","depends_on_id":"gno-zp2","type":"parent-child","created_at":"2025-12-29T01:32:39.04304+01:00","created_by":"daemon"},{"issue_id":"gno-zp2.10","depends_on_id":"gno-zp2.5","type":"blocks","created_at":"2025-12-29T01:33:05.766251+01:00","created_by":"daemon"}]}
{"id":"gno-zp2.11","title":"D6: MCP.md - Claude Code/Desktop integration","description":"MCP server documentation for agentic integration.\n\n## Sections\n1. What is MCP - Brief explanation\n2. Starting the server - gno mcp\n3. Tool Reference\n   - gno.search - BM25 keyword search\n   - gno.vsearch - Semantic vector search\n   - gno.query - Hybrid with reranking\n   - gno.get - Single document retrieval\n   - gno.multi_get - Batch retrieval\n   - gno.status - Index health\n\n4. Configuration\n   - Claude Desktop config.json\n   - Claude Code settings.json\n   - Cursor settings\n\n5. Agentic Workflows\n   - Example: Claude Code searching your Obsidian vault\n   - Example: Cross-project knowledge retrieval\n   - Example: Meeting notes search from any context\n\n## Code Examples\nFull JSON config snippets, copy-pasteable.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-29T01:32:40.238301+01:00","updated_at":"2025-12-29T01:32:40.238301+01:00","dependencies":[{"issue_id":"gno-zp2.11","depends_on_id":"gno-zp2","type":"parent-child","created_at":"2025-12-29T01:32:40.244876+01:00","created_by":"daemon"},{"issue_id":"gno-zp2.11","depends_on_id":"gno-zp2.5","type":"blocks","created_at":"2025-12-29T01:33:05.930671+01:00","created_by":"daemon"}]}
{"id":"gno-zp2.12","title":"D7: USE-CASES.md - Real-world scenarios","description":"Practical use cases showing GNO's power.\n\n## Scenarios\n1. Personal Knowledge Base\n   - Index Obsidian vault, Notion exports, markdown notes\n   - Search from any project via MCP\n\n2. Developer Documentation\n   - Index project docs, API specs, READMEs\n   - Quick lookup during coding\n\n3. Meeting Notes \u0026 Transcripts\n   - Index Otter.ai exports, meeting summaries\n   - Find 'what did we decide about X?'\n\n4. Cross-Project Search\n   - Multiple collections for different projects\n   - Context-aware results\n\n5. Agentic Workflows\n   - Claude Code integration\n   - Automated knowledge retrieval\n   - RAG-style document grounding\n\n## Each Scenario Includes\n- Setup commands\n- Example queries\n- Expected workflow\n- Tips and tricks\n\n## Why Local-First\n- Privacy (no cloud upload)\n- Speed (SQLite, local models)\n- Offline capability\n- Full control over your data","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-29T01:32:41.970005+01:00","updated_at":"2025-12-29T01:32:41.970005+01:00","dependencies":[{"issue_id":"gno-zp2.12","depends_on_id":"gno-zp2","type":"parent-child","created_at":"2025-12-29T01:32:41.977299+01:00","created_by":"daemon"},{"issue_id":"gno-zp2.12","depends_on_id":"gno-zp2.5","type":"blocks","created_at":"2025-12-29T01:33:06.083542+01:00","created_by":"daemon"}]}
{"id":"gno-zp2.13","title":"D8: CONFIGURATION.md - Collections, contexts, models","description":"Configuration reference for power users.\n\n## Sections\n1. Collections\n   - Creating and managing\n   - Glob patterns\n   - Include/exclude filters\n\n2. Contexts\n   - What are contexts\n   - Adding descriptive metadata\n   - Virtual paths (gno://)\n   - Global vs collection-specific\n\n3. Model Configuration\n   - Default models\n   - Presets (fast, balanced, quality)\n   - Custom model URIs\n   - Model cache location\n\n4. Environment Variables\n   - XDG_CACHE_HOME\n   - NO_COLOR\n   - Others\n\n5. Data Locations\n   - Index database\n   - Model cache\n   - Config file","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-29T01:32:43.062938+01:00","updated_at":"2025-12-29T01:32:43.062938+01:00","dependencies":[{"issue_id":"gno-zp2.13","depends_on_id":"gno-zp2","type":"parent-child","created_at":"2025-12-29T01:32:43.072238+01:00","created_by":"daemon"},{"issue_id":"gno-zp2.13","depends_on_id":"gno-zp2.5","type":"blocks","created_at":"2025-12-29T01:33:06.240141+01:00","created_by":"daemon"}]}
{"id":"gno-zp2.14","title":"D9: TROUBLESHOOTING.md - Common issues","description":"Troubleshooting guide for common problems.\n\n## Sections\n1. Installation Issues\n   - Bun not found\n   - Native deps failing\n   - macOS SQLite (brew install sqlite)\n\n2. Model Issues\n   - Download failures\n   - Disk space\n   - Model not loading\n\n3. Search Issues\n   - No results\n   - Poor relevance\n   - Vector search unavailable\n\n4. Performance\n   - Slow embedding\n   - Large collections\n   - Memory usage\n\n5. Debugging\n   - gno doctor --json\n   - gno status\n   - Verbose logging\n\n## Format\nProblem → Cause → Solution","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-29T01:32:44.199951+01:00","updated_at":"2025-12-29T01:32:44.199951+01:00","dependencies":[{"issue_id":"gno-zp2.14","depends_on_id":"gno-zp2","type":"parent-child","created_at":"2025-12-29T01:32:44.206463+01:00","created_by":"daemon"},{"issue_id":"gno-zp2.14","depends_on_id":"gno-zp2.5","type":"blocks","created_at":"2025-12-29T01:33:06.415917+01:00","created_by":"daemon"}]}
{"id":"gno-zp2.2","title":"T12.1a: Quickstart docs (init -\u003e index -\u003e ask)","description":"Document 3-command quickstart. OS-specific paths. What gets created where. Multilingual note (default preset, best-effort tagging). Reference: docs/prd.md §5.2.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-23T14:52:03.001388+01:00","updated_at":"2025-12-29T01:30:35.166246+01:00","closed_at":"2025-12-29T01:30:35.166246+01:00","close_reason":"Replaced with comprehensive docs plan","dependencies":[{"issue_id":"gno-zp2.2","depends_on_id":"gno-zp2","type":"parent-child","created_at":"2025-12-23T14:52:03.002503+01:00","created_by":"daemon"}]}
{"id":"gno-zp2.3","title":"T12.2: Release automation, versioning, changelog","description":"Automated releases. Semantic versioning. Changelog generation. Reference: docs/prd.md §19.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-23T14:52:04.767482+01:00","updated_at":"2025-12-23T14:52:04.767482+01:00","dependencies":[{"issue_id":"gno-zp2.3","depends_on_id":"gno-zp2","type":"parent-child","created_at":"2025-12-23T14:52:04.768895+01:00","created_by":"daemon"}]}
{"id":"gno-zp2.4","title":"T12.3: Troubleshooting docs (native deps, caches, models)","description":"Document common issues: native dep friction, model downloads, cache locations, gno doctor usage. Reference: docs/prd.md §20.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T14:52:06.290122+01:00","updated_at":"2025-12-29T01:30:35.170633+01:00","closed_at":"2025-12-29T01:30:35.170633+01:00","close_reason":"Replaced with comprehensive docs plan","dependencies":[{"issue_id":"gno-zp2.4","depends_on_id":"gno-zp2","type":"parent-child","created_at":"2025-12-23T14:52:06.291163+01:00","created_by":"daemon"}]}
{"id":"gno-zp2.5","title":"D0: Deep codebase review for documentation","description":"# Plan: Deep Codebase Review for Documentation\n\n## Overview\nThorough code review before writing world-class docs. Output: `docs/NOTES.md` with architecture, design decisions, score normalization, models, and data flow diagrams.\n\n**Source-of-Truth Rule**: Specs (`spec/cli.md`, `spec/mcp.md`, `spec/output-schemas/*.json`) are authoritative contracts. `docs/NOTES.md` is implementation notes: how it's built, design rationale, code pointers, non-contractual details. Link to specs, don't duplicate.\n\n## Approach\n\n### Phase 1: Spec \u0026 Schema Review\nReview all specifications - these are THE source of truth:\n- `spec/cli.md` (25+ commands, 5 output formats, 3 exit codes, stdout/stderr rules)\n- `spec/mcp.md` (6 tools, 1 resource type)\n- `spec/output-schemas/*.json` (5 schemas) + `test/spec/schemas/*` contract tests\n- `spec/db/schema.sql` (9 tables)\n\nDocument interface invariants:\n- stdout vs stderr policies\n- exit code mapping (0=success, 1=error, 2=partial)\n- JSON schema validation + where contract tests live\n\n### Phase 2: Pipeline Deep Dive\nTrace query → results flow through hybrid search:\n- `src/pipeline/hybrid.ts:184-524` - Main orchestrator\n- `src/pipeline/search.ts` - BM25 + min-max normalization\n- `src/pipeline/vsearch.ts` - Vector + distance→similarity\n- `src/pipeline/fusion.ts` - RRF (k=60, weights, topRankBonus)\n- `src/pipeline/rerank.ts` - Position-aware blending tiers\n- `src/pipeline/expansion.ts` - Query expansion w/ language prompts\n- `src/pipeline/query-language.ts` - Language detection (franc)\n\n**Score Semantics** (critical section):\n- BM25 normalization is per-query (not comparable across queries)\n- Hybrid blending uses normalized fusion scores, clamped per-query\n- `--min-score` applies post-normalization\n- Tie-breaking: mirrorHash:seq determinism\n- Explicit formulas with file/line pointers\n\n### Phase 3: Storage Layer\nDocument SQLite adapter + sqlite-vec:\n- `src/store/sqlite/adapter.ts` - Core StorePort implementation\n- `src/store/vector/sqlite-vec.ts` - Per-model vec tables\n- Graceful degradation when sqlite-vec unavailable\n\n**Migrations \u0026 FTS mechanics**:\n- Migration runner behavior, `schema_meta` fields (version, fts_tokenizer)\n- FTS virtual table creation/rebuild triggers\n- `escapeFts5Query()` behavior (what queries are supported)\n- Tokenizer config immutability\n\n### Phase 4: Ingestion \u0026 Models\nDocument chunking, conversion, and model configuration:\n- `src/ingestion/chunker.ts:74-86` - 800 tokens, 15% overlap\n- `src/ingestion/language.ts` - CJK/European detection\n\n**Converter subsystem** (critical):\n- MIME detection → converter registry → canonical markdown\n- Canonical markdown rules (what changes `mirror_hash`)\n- converterId/converterVersion tracking\n- Failure modes: `ingest_errors`, `last_error_*` fields\n- Core invariant: \"search operates on mirror; identity refers to source\"\n\n**Model presets**:\n- `src/config/types.ts:170-195` - 3 presets (slim/balanced/quality)\n- `src/llm/registry.ts` - Preset resolution\n- Disk size only for models (RAM is workload-dependent, add disclaimer)\n\n### Phase 5: Write docs/NOTES.md\nCreate `docs/NOTES.md` with header: `Reviewed at commit: \u003chash\u003e`\n\nContents:\n1. Architecture overview (Mermaid for complex flows, ASCII for simple)\n2. Data flow: file → convert → chunk → embed → index\n3. Query flow: query → expansion → retrieval → fusion → rerank → results\n4. **Score Semantics**: normalization table, comparability rules, minScore behavior\n5. Model preset table (disk size, with RAM disclaimer)\n6. Key design decisions \u0026 rationale (link to specs, don't duplicate)\n7. Graceful degradation paths (explicit branches)\n8. Interface invariants (stdout/stderr, exit codes, schema refs)\n\n## Key References\n- `spec/cli.md:L1-928` - CLI contract (authoritative)\n- `spec/mcp.md:L1-538` - MCP contract (authoritative)\n- `spec/output-schemas/*.json` - Output schemas (authoritative)\n- `src/pipeline/types.ts:152-233` - RRF config, blending tiers\n- `src/ingestion/types.ts:66-78` - ChunkParams\n- `test/spec/schemas/*` - Contract tests\n\n## Acceptance Criteria\n- [ ] All spec files reviewed and cross-referenced (link, don't duplicate)\n- [ ] Score semantics section with comparability rules and formulas\n- [ ] Pipeline diagram (Mermaid for complex, ASCII for overview)\n- [ ] Model presets table (disk size; RAM disclaimer)\n- [ ] Graceful degradation paths as explicit branches\n- [ ] Converter/canonicalization subsystem documented\n- [ ] Migrations/FTS mechanics covered\n- [ ] NOTES.md includes \"Reviewed at commit: \u003chash\u003e\" header\n- [ ] NOTES.md contains required section headings (lintable)\n\n## Maintenance Policy\nUpdate NOTES.md when:\n- Pipeline scoring changes (src/pipeline/*)\n- Schema changes (spec/db/schema.sql, migrations)\n- Model presets change (src/config/types.ts)\n- Spec contracts change (spec/*.md)\n\nPRs touching these paths should trigger doc review.\n\n## Risks\n- Score thresholds may need code archaeology to explain \"why\"\n- Some edge cases need runtime verification\n- RAM requirements are workload-dependent (use disk size + disclaimer)","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T01:31:39.996837+01:00","updated_at":"2025-12-29T02:06:23.738339+01:00","closed_at":"2025-12-29T02:06:23.738339+01:00","close_reason":"Deep codebase review complete. Created docs/NOTES.md documenting: architecture, ingestion/query flows, score semantics, model presets, design decisions, degradation paths, interface contracts.","dependencies":[{"issue_id":"gno-zp2.5","depends_on_id":"gno-zp2","type":"parent-child","created_at":"2025-12-29T01:31:40.006047+01:00","created_by":"daemon"}]}
{"id":"gno-zp2.5.1","title":"Review specs \u0026 schemas","description":"Review spec/cli.md, spec/mcp.md, spec/output-schemas/*.json, spec/db/schema.sql. Document interface invariants: stdout/stderr policies, exit codes (0/1/2), contract test locations (test/spec/schemas/*).","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T01:44:35.688826+01:00","updated_at":"2025-12-29T02:02:55.10283+01:00","closed_at":"2025-12-29T02:02:55.10283+01:00","close_reason":"Reviewed spec/cli.md (25+ cmds, exit codes 0/1/2, 5 output formats), spec/mcp.md (6 tools, 1 resource), 12 output schemas, spec/db/schema.sql (10 tables). Contract tests use Ajv validator.","dependencies":[{"issue_id":"gno-zp2.5.1","depends_on_id":"gno-zp2.5","type":"parent-child","created_at":"2025-12-29T01:44:35.698651+01:00","created_by":"daemon"}]}
{"id":"gno-zp2.5.2","title":"Pipeline deep dive","description":"Trace hybrid.ts orchestration. Document Score Semantics: BM25 per-query normalization, vector 1-dist/2, RRF k=60, blending tiers. Include formulas with file:line refs. Document comparability rules (scores NOT comparable across queries), minScore behavior, tie-breaking (mirrorHash:seq).","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T01:44:36.68711+01:00","updated_at":"2025-12-29T02:03:37.829655+01:00","closed_at":"2025-12-29T02:03:37.829655+01:00","close_reason":"Traced hybrid.ts:184-524 orchestration. Score semantics: BM25 raw→min-max:29-52, Vector dist→1-dist/2:26-28, RRF k=60 weights 1.0:152-158, blending tiers:196-200, tie-break mirrorHash:seq:150-158. Scores NOT comparable across queries. minScore applied post-normalization:357-361.","dependencies":[{"issue_id":"gno-zp2.5.2","depends_on_id":"gno-zp2.5","type":"parent-child","created_at":"2025-12-29T01:44:36.692203+01:00","created_by":"daemon"}]}
{"id":"gno-zp2.5.3","title":"Storage layer review","description":"Document SQLite adapter, sqlite-vec per-model tables, graceful degradation. Include: migration runner + schema_meta fields, FTS virtual table creation/rebuild, escapeFts5Query() behavior, tokenizer config immutability.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T01:44:38.082976+01:00","updated_at":"2025-12-29T02:04:09.839586+01:00","closed_at":"2025-12-29T02:04:09.839586+01:00","close_reason":"Reviewed adapter.ts (1180 LOC): migrations via runner.ts, FTS tokenizer in schema_meta, escapeFts5Query:48-59 quotes tokens, tokenizer immutable after creation. sqlite-vec.ts: per-model vec tables (vec_\u003chash8\u003e), graceful degradation (storage works w/o search), encodeEmbedding copies arraybuffer.","dependencies":[{"issue_id":"gno-zp2.5.3","depends_on_id":"gno-zp2.5","type":"parent-child","created_at":"2025-12-29T01:44:38.088667+01:00","created_by":"daemon"}]}
{"id":"gno-zp2.5.4","title":"Ingestion \u0026 models review","description":"Document chunker (800 tokens, 15% overlap), language detection. Include converter subsystem: MIME→registry→canonical MD, mirror_hash rules, converterId/converterVersion, ingest_errors/last_error_* fields. Model presets: disk size only, RAM disclaimer.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T01:44:39.139018+01:00","updated_at":"2025-12-29T02:04:47.899484+01:00","closed_at":"2025-12-29T02:04:47.899484+01:00","close_reason":"Reviewed chunker.ts (800 tok * 4 chars = 3200 chars max, 15% overlap), language.ts (CJK 10% threshold, stop words for en/de/fr/it). Converters: registry.ts first-match wins, canonicalize.ts NFC+BOM+control strip+collapse blanks, mirrorHash SHA-256. Model presets: 1GB/2GB/2.5GB disk sizes.","dependencies":[{"issue_id":"gno-zp2.5.4","depends_on_id":"gno-zp2.5","type":"parent-child","created_at":"2025-12-29T01:44:39.143805+01:00","created_by":"daemon"}]}
{"id":"gno-zp2.5.5","title":"Write docs/NOTES.md","description":"Create docs/NOTES.md with 'Reviewed at commit: \u003chash\u003e' header. Sections: (1) Architecture (Mermaid+ASCII), (2) Data flow, (3) Query flow, (4) Score Semantics w/ formulas, (5) Model presets (disk+RAM disclaimer), (6) Design decisions (link to specs), (7) Degradation paths, (8) Interface invariants.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T01:44:40.936103+01:00","updated_at":"2025-12-29T02:06:22.166384+01:00","closed_at":"2025-12-29T02:06:22.166384+01:00","close_reason":"Created docs/NOTES.md with architecture overview, data/query flows, score formulas, model presets, design decisions, degradation paths, interface invariants.","dependencies":[{"issue_id":"gno-zp2.5.5","depends_on_id":"gno-zp2.5","type":"parent-child","created_at":"2025-12-29T01:44:40.944434+01:00","created_by":"daemon"},{"issue_id":"gno-zp2.5.5","depends_on_id":"gno-zp2.5.1","type":"blocks","created_at":"2025-12-29T01:44:49.290231+01:00","created_by":"daemon"},{"issue_id":"gno-zp2.5.5","depends_on_id":"gno-zp2.5.2","type":"blocks","created_at":"2025-12-29T01:44:49.370044+01:00","created_by":"daemon"},{"issue_id":"gno-zp2.5.5","depends_on_id":"gno-zp2.5.3","type":"blocks","created_at":"2025-12-29T01:44:49.445369+01:00","created_by":"daemon"},{"issue_id":"gno-zp2.5.5","depends_on_id":"gno-zp2.5.4","type":"blocks","created_at":"2025-12-29T01:44:49.533857+01:00","created_by":"daemon"}]}
{"id":"gno-zp2.6","title":"D1: README.md - Project landing page","description":"Create world-class README.md in project root.\n\n## Sections\n1. Hero - One-line value prop, badges\n2. What is GNO - 2-3 sentence explanation\n3. Quick Start - 3 commands to first search\n4. Features - Bullet list (hybrid search, MCP, local-first)\n5. Installation - Brief, link to full docs\n6. Documentation - Links to all doc pages\n7. Architecture - Mini diagram, link to full\n8. License\n\n## Quality\n- Copy-pasteable commands\n- Works on GitHub rendering\n- Hooks reader in first 10 seconds","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-29T01:32:33.225496+01:00","updated_at":"2025-12-29T01:32:33.225496+01:00","dependencies":[{"issue_id":"gno-zp2.6","depends_on_id":"gno-zp2","type":"parent-child","created_at":"2025-12-29T01:32:33.231095+01:00","created_by":"daemon"},{"issue_id":"gno-zp2.6","depends_on_id":"gno-zp2.5","type":"blocks","created_at":"2025-12-29T01:33:05.108825+01:00","created_by":"daemon"}]}
{"id":"gno-zp2.7","title":"D2: QUICKSTART.md - 5-minute getting started","description":"Get users from zero to searching in 5 minutes.\n\n## Flow\n1. Install (one command)\n2. Create first collection (init or collection add)\n3. Generate embeddings (gno embed)\n4. Search (search/vsearch/query examples)\n5. What's next (link to full docs)\n\n## Include\n- OS-specific paths (~/.cache/gno, etc.)\n- Expected output examples\n- Common first-timer gotchas\n- Time estimates per step","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-29T01:32:34.449835+01:00","updated_at":"2025-12-29T01:32:34.449835+01:00","dependencies":[{"issue_id":"gno-zp2.7","depends_on_id":"gno-zp2","type":"parent-child","created_at":"2025-12-29T01:32:34.456101+01:00","created_by":"daemon"},{"issue_id":"gno-zp2.7","depends_on_id":"gno-zp2.5","type":"blocks","created_at":"2025-12-29T01:33:05.281332+01:00","created_by":"daemon"}]}
{"id":"gno-zp2.8","title":"D3: INSTALLATION.md - All install methods","description":"Comprehensive installation guide.\n\n## Methods\n1. bun install -g (primary)\n2. npm install -g (requires Bun runtime)\n3. From source (git clone + bun install)\n4. Future: Homebrew, Scoop\n\n## Requirements\n- Bun \u003e= 1.0.0\n- macOS: Homebrew SQLite for vector search\n- Disk space for models (~1.5GB)\n\n## Platform Notes\n- macOS (arm64, x64)\n- Linux (x64)\n- Windows (x64, known limitations)\n\n## Verification\n- gno --version\n- gno doctor --json","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-29T01:32:35.811077+01:00","updated_at":"2025-12-29T01:32:35.811077+01:00","dependencies":[{"issue_id":"gno-zp2.8","depends_on_id":"gno-zp2","type":"parent-child","created_at":"2025-12-29T01:32:35.816525+01:00","created_by":"daemon"},{"issue_id":"gno-zp2.8","depends_on_id":"gno-zp2.5","type":"blocks","created_at":"2025-12-29T01:33:05.446327+01:00","created_by":"daemon"}]}
{"id":"gno-zp2.9","title":"D4: ARCHITECTURE.md - How hybrid search works","description":"Deep dive into GNO's architecture with ASCII diagrams.\n\n## Sections\n1. System Overview\n   - ASCII diagram: User → CLI → Pipeline → Store → Results\n\n2. Hybrid Search Pipeline\n   - Query expansion (LLM generates variants)\n   - Parallel retrieval (BM25 + Vector)\n   - RRF Fusion (k=60, weights, top-rank bonus)\n   - LLM Reranking (cross-encoder scoring)\n   - Position-aware blending\n\n3. Score Normalization\n   - Table: Backend → Raw Score → Conversion → Range\n   - Final score interpretation (0.8+ = highly relevant)\n\n4. Storage Layer\n   - SQLite schema overview\n   - FTS5 for BM25\n   - sqlite-vec for vectors\n   - Chunk storage (800 tokens, 15% overlap)\n\n5. Model Configuration\n   - Embedding model\n   - Reranker model\n   - Generation model (expansion)\n   - Model download/caching\n\n## Diagrams\nInclude ASCII art like QMD example showing full pipeline flow.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-29T01:32:37.565506+01:00","updated_at":"2025-12-29T01:32:37.565506+01:00","dependencies":[{"issue_id":"gno-zp2.9","depends_on_id":"gno-zp2","type":"parent-child","created_at":"2025-12-29T01:32:37.569557+01:00","created_by":"daemon"},{"issue_id":"gno-zp2.9","depends_on_id":"gno-zp2.5","type":"blocks","created_at":"2025-12-29T01:33:05.607668+01:00","created_by":"daemon"}]}
